(self.modernJsonp=self.modernJsonp||[]).push([["43425"],{516829:function(e,t,n){var s,o;n.r(t),n.d(t,{default:()=>l});let i={fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BadgeManagerMutation",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"v3DeleteBadgeMutation",plural:!1,selections:[s={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"data",plural:!1,selections:[o={alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null}],storageKey:null}],type:"V3DeleteBadge",abstractKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"BadgeManagerMutation",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"v3DeleteBadgeMutation",plural:!1,selections:[s,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"data",plural:!1,selections:[o,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],type:"V3DeleteBadge",abstractKey:null}],storageKey:null}]},params:{id:"b02365b27ce69f648cde539398a9bef3c506f5fcd3fbadc974256de04ec86078",metadata:{},name:"BadgeManagerMutation",operationKind:"mutation",text:null}};i.hash="d6f840c748407c7aa62123d5beac3239";let l=i},35794:function(e,t,n){n.d(t,{b:()=>r,m:()=>a});var s=n(667294),o=n(729434),i=n(785893);let{Provider:l,get:a}=(0,o.Z)("LensContext");function r({children:e}){let[t,n]=(0,s.useState)(),[o,a]=(0,s.useState)(),[r,c]=(0,s.useState)([]),[u,d]=(0,s.useState)(),[_,h]=(0,s.useState)(),[p,m]=(0,s.useState)(!1);return(0,i.jsx)(l,{value:{heroImageUrl:o,historyData:r,image:t,imageData:_,isLensModalOpen:p,setHeroImageUrl:a,setHistoryData:c,setImage:n,setImageData:h,setIsLensModalOpen:m,setUpdatedCropArea:d,updatedCropArea:u},children:e})}},138:function(e,t,n){n.d(t,{Z:()=>s});function s(e){return e?"/pin-creation-tool/":"/idea-pin-builder/"}},509207:function(e,t,n){n.d(t,{Z:()=>s});let s='-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Helvetica,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","ヒラギノ角ゴ Pro W3","Hiragino Kaku Gothic Pro",メイリオ,Meiryo,"ＭＳ Ｐゴシック",Arial,sans-serif'},23923:function(e,t,n){n.d(t,{Z:()=>R});var s=n(20256),o=n(980787),i=n(679422),l=n(821342),a=n(734308),r=n(667294),c=n(111330),u=n(525839),d=n(753143),_=n(785893);function h({paddingY:e=0}){let t=(0,u.ZP)(),n=(0,d.M0)(),i=n.getItem(c.z),[l,a]=(0,r.useState)(i),{logContextEvent:h}=(0,o.u)(),p=(0,r.useCallback)(()=>{n.setItem(c.z,!0),h({event_type:16446}),a(!0)},[h,n]);return l?null:(0,_.jsx)(s.xu,{paddingY:e,children:(0,_.jsx)(s.he,{iconAccessibilityLabel:t._('Claim external accounts', 'header.accountsOptionsMenu.contentClaimingLink', 'menu item linking to the account claiming section in the settings'),message:t._('You can now link your Instagram and other external accounts to Pinterest.', 'header.accountsOptionsMenu.accountClaimingBannerMessage', 'banner message for account claiming'),onDismiss:p,type:"info"})})}var p=n(780134);function m(){let e=(0,u.ZP)();return{addAccount:{value:"add-account",label:e._('Add Pinterest account', 'header.accountsOptionsMenu.addSecondaryAccountButton', 'Short text on the button that allows a user to add a new account or log in to another Pinterest account')},businessAccess:{value:"business-access",label:e._('Business Access', 'Link to business Access Landing Page', 'A button that links to business access')},businessAccount:e=>({value:`business-account-${e.id}`,label:e.username}),accountClaiming:{value:"account-claiming",label:e._('Claimed external accounts', 'header.accountsOptionsMenu.contentClaimingLink', 'menu item linking to the account claiming section in the settings')},contentClaiming:{value:"content-claiming",label:e._('Content claiming portal', 'header.accountsOptionsMenu.contentManagementPortal', 'menu item linking to the content management portal')},convertToBusiness:{value:"convert-to-business",label:e._('Convert to business', 'header.accountsOptionsMenu.addAccountButton', 'Short upsell text on the button that allows a user to convert to a Pinterest business account')},currentAccount:{value:"current-account",label:e._('Current account', 'SwitchAccountsList.CurrentlyInItem', 'The account the user is currently logged into')},failedAccount:{value:"failed-account",label:e._('Failed to log into this account', 'header.accountsOptionsMenu.failedAccountItem', 'Explanation for which account the user could not log into')},getHelp:{value:"get-help",label:e._('Help center', 'header.accountsOptionsMenu.helpCenter.label', 'menu item linking to the help center')},homefeedTuner:{value:"homefeed-tuner",label:e._('Home feed tuner', 'header.accountsOptionsMenu.homefeedTuner.label', 'menu item linking to home feed editor')},installApp:e=>({value:"install-app",label:e}),lbaAccountSwitch:e=>({value:`lba-account-switch-${e.id}`,label:e.username}),logOut:{value:"log-out",label:e._('Log out', 'header.accountsOptionsMenu.logout', 'menu item that logs you out of your Pinterest account')},parentAccount:e=>({value:`parent-account-${e.id}`,label:e.username}),termsOfService:{value:"tos-policy",label:e._('Terms of service', 'header.accountsOptionsMenu.termsOfService.label', 'menu item linking to our terms of service')},privacyPolicy:{value:"privacy-policy",label:e._('Privacy policy', 'header.accountsOptionsMenu.privacyPolicy.label', 'menu item linking to our privacy policy')},reportsAndViolationsCenter:{value:"reports-and-violations-center",label:e._('Reports and violations center', 'header.accountsOptionsMenu.reportsAndViolationsCenter', 'menu item linked to the reports and violations center')},reportBug:{value:"report-bug",label:e._('Report a bug', 'header.accountsOptionsMenu.reportBug', 'menu item to show employee-only report bug modal')},settings:{value:"settings",label:e._('Settings', 'header.accountsOptionsMenu.settings', 'menu item linking to your settings')},settingsPrivacy:{value:"settingsPrivacy",label:e._('Your privacy rights', 'header.accountsOptionsMenu.settingsPrivacy.label', 'menu item linking to privacy settings')},adsSupport:{value:"ads-support",label:e._('Ads support', 'header.accountsOptionsMenu.adsSupport', 'menu item linking to ads support')},requestFeature:{value:"request-a-feature",label:e._('Request a feature', 'header.accountsOptionsMenu.requestAFeature', 'menu item linking to request a feature page in help center')},pinterestTvStudio:{value:"pinterest-tv-studio",label:e._('Pinterest TV Studio', 'Link to Pinterest Tv Creator Studio', 'a link menu item that links to creator stuido')},betaTester:{value:"be-a-beta-tester",label:e._('Be a beta tester', 'header.accountsOptionsMenu.beBetaTesterProgram', 'A link to Pinterest Beta Tester program')},teenSafetyResources:{value:"teen-safety-resources",label:e._('Teen safety resources', 'header.accountsOptionsMenu.teenSafetyResources', 'Menu item linkin the user to the help center for teen resources page')}}}var f=n(699666),g=n(646924),b=n(538281),v=n(738827),y=n(886981),x=n(694955),P=n(483180),A=n(252440),w=n(785873),C=n(521009),j=n(993279),k=n(230117),z=n(473728),S=n(146621);let T=["chrome","windows"];var L=n(901971);function I({failedAccount:e,handleReauthAccount:t,handleRemoveUnauthAccount:n}){let o=(0,u.ZP)();return(0,_.jsxs)(r.Fragment,{children:[(0,_.jsx)(s.xu,{marginTop:4,children:(0,_.jsx)(s.zx,{color:"red",fullWidth:!0,onClick:t,text:o._('Log in again', 'header.accountsOptionsMenu.failedAccountLoginButton', 'Text on button allowing user to log into an account after failing to switch to that account')})}),(0,_.jsx)(s.xu,{marginTop:3,children:(0,_.jsx)(s.zx,{fullWidth:!0,onClick:()=>n(e.id),text:o._('Remove account', 'header.accountsOptionsMenu.failedAccountRemoveButton', 'Text on button allowing user to remove an account from their account switcher after failing to switch to it')})})]})}var Z=n(817618),M=n(244529);let E=new s.Ry(1e3);function R({anchor:e,onDismiss:t,advertiser:n,showAccountSwitcher:c,showAdsSupportOption:d,showMoreOptions:R=!0,showSettingsAndSupport:B,isWwwSite:D,idealDirection:O="down",dropdownId:N="HeaderAccountOptionsFlyout",zIndex:F=E}){let H=(0,u.ZP)(),{failedAccount:U,handleReauthAccount:$,handleRemoveUnauthAccount:W}=(0,g.Z)(t,D),G=m(),{enabled:Y}=(0,M.Z)(),{currentlyIn:V,yourAccount:q,moreOptions:X,settingsAndSupport:J}=function({onDismiss:e,handleFocus:t,advertiser:n,showAdsSupportOption:c,isWwwSite:d,isVerticalNavEnabled:I}){let Z=(0,l.Z)(),M=(0,u.ZP)(),{logContextEvent:E}=(0,o.u)(),{isLoaded:R,data:B}=(0,y.Z)({name:"ApiResource",options:{url:"/v3/users/me/",data:{fields:"user.content_claiming_access"}}}),{isLoaded:D,data:O}=(0,y.Z)({name:"ApiResource",options:{url:"/v3/users/settings/"}}),N=!!O?.connected_to_instagram,{content_claiming_access:F=!1}=B||{},{handleShowReportBugModal:H}=(0,L.P)(),U=(0,f.Z)(),$=function(){let e=(0,u.ZP)(),t=(0,r.useContext)(S.Z),n=(0,j.kM)(window,t),s=(0,C.Z)(),o=e=>{s({component:247,element:e,event_type:101})},i=(0,z.Z)(e._('Install the {{appName}} app', 'header.accountsOptionsMenu.installApp', 'menu item linking app that can be installed'),{appName:(0,k.Z)(n)});return T.includes(n)?{onClick:()=>{if("windows"===n)o(11409),(0,w.Z)(`${x.TMP}&cid=flyout_cta`,!0);else if("chrome"===n&&t){let e=t();e&&(o(11410),e.prompt())}},text:i}:null}(),W=Z.isAuth&&!!Z.isEmployee,G=!!Z.isAuth&&Z.isPartner,Y=Z.isAuth&&!!Z.teenSafetyOptionsUrl,V=!!Z.isAuth&&!Z.isLimitedLogin,q=Z.isAuth?Z.id:void 0,X=(0,i.Z)(),{fetchedUserAccounts:J,handleAccountRepClick:K,handleAddSecondaryAccount:Q,handleClick:ee,handleLinkedAccountSwitch:et,handleUnlockBusinessTools:en,isLoading:es,showUnlockBusinessTools:eo}=(0,g.Z)(e,d),ei=m(),el=J.filter(e=>!e.partner&&!(e.owners||[]).length||e.partner&&!e.partner.isLinkedBusiness),ea=J.find(e=>e.id===(Z.isAuth&&Z.id)),er=Z.isAuth&&Z.partner?.is_linked_business;er&&(el=el.sort(e=>ea?.owners?.some(t=>t.id===e.id)?-1:1));let ec=es&&(0,_.jsx)(b.Z,{}),eu=ea?.businesses?.length?ea.businesses.map(e=>q!==e.id&&(0,_.jsx)(s.Lt.Item,{dataTestId:"lba-account-switch-option",onSelect:()=>et(e,ea.id),option:ei.lbaAccountSwitch(e),children:(0,_.jsx)(p.Z,{user:e},e.id)},e.id)):null,ed=el.map(e=>e.id!==q?[(0,_.jsx)(s.Lt.Item,{onSelect:()=>K(e),option:ei.parentAccount(e),children:(0,_.jsx)(p.Z,{isCurrentAccount:q===e.id,user:e})},e.id),...e?.businesses?.length?e.businesses.map(t=>q!==t.id&&(0,_.jsx)(s.Lt.Item,{dataTestId:"lba-account-switch-option",onSelect:()=>et(t,e.id),option:ei.businessAccount(t),children:(0,_.jsx)(p.Z,{user:t},t.id)},t.id)):[]]:null),e_=d&&(0,_.jsx)(s.Lt.Link,{dataTestId:"header-menu-add-account",href:"/add-account",onClick:Q,option:ei.addAccount}),eh=(0,_.jsx)(s.Lt.Link,{dataTestId:"header-menu-add-account",href:"/add-account",onClick:Q,option:ei.addAccount}),ep=eo&&(0,_.jsx)(s.Lt.Link,{dataTestId:"header-menu-business-account",href:Z.isAuth?"https://www.pinterest.com/convert-business":`${x.KDH}?utm_source=pinterest&utm_medium=settings&utm_campaign=convert_settings`,onClick:en,option:ei.convertToBusiness}),em=(0,_.jsx)(s.Lt.Link,{href:x.zXf,onClick:({event:e})=>{e.preventDefault(),ee(15983),t()},option:ei.accountClaiming}),ef=R&&F&&(0,_.jsx)(s.Lt.Link,{href:"/content-claiming",onClick:()=>{ee(13606),t()},option:ei.contentClaiming}),eg=W&&(0,_.jsx)(s.Lt.Item,{onSelect:()=>{H(),ee(13607),e()},option:ei.reportBug}),eb=(0,_.jsx)(s.Lt.Link,{dataTestId:"header-menu-options-settings",href:V?`https://${(0,a.Z)()}/settings`:"",onClick:({event:e})=>{if(X){e.stopPropagation(),X();return}ee(247),t()},option:ei.settings}),ev=(0,_.jsx)(s.Lt.Link,{href:V?"/edit":"",onClick:({event:e})=>{if(X){e.stopPropagation(),X();return}ee(11345),t()},option:ei.homefeedTuner},"header-menu-options-homefeed-tuner"),ey=!G&&$?(0,_.jsx)(s.Lt.Item,{onSelect:()=>{$.onClick(),e()},option:ei.installApp($.text)}):null,ex=(0,_.jsx)(s.Lt.Link,{dataTestId:"header-menu-options-privacy",href:V?`https://${(0,a.Z)()}/settings/privacy`:"",onClick:({event:e})=>{if(X){e.stopPropagation(),X();return}ee(13334),t()},option:ei.settingsPrivacy}),eP=(0,_.jsx)(s.Lt.Link,{href:V?"/reports-and-violations":"",onClick:({event:e})=>{if(X){e.stopPropagation(),X();return}ee(14618),t()},option:ei.reportsAndViolationsCenter}),eA=Y?(0,_.jsx)(s.Lt.Link,{href:Z.teenSafetyOptionsUrl??"",iconEnd:"visit",onClick:()=>{E({event_type:101,element:14321}),ee(14321),t()},option:ei.teenSafetyResources}):null,ew=G&&c&&(!n||(0,v.Z)((n||{}).actions||[],7))&&(0,_.jsx)(s.Lt.Link,{dataTestId:"header-menu-options-ads-support",href:x.JbB,iconEnd:"visit",onClick:()=>{ee(10106),t()},option:ei.adsSupport}),eC=G?(0,_.jsx)(s.Lt.Link,{dataTestId:"header-menu-options-request-a-feature",href:x.W32+"?utm_source=pinterest&utm_medium=settings&utm_campaign=request_a_feature_exp",iconEnd:"visit",onClick:()=>{ee(11345),t()},option:ei.requestFeature}):null,ej=(0,_.jsx)(s.Lt.Link,{dataTestId:"header-menu-options-help",href:`${x.gOE}?source=gear_menu_web`,iconEnd:"visit",onClick:()=>{ee(8002),t()},option:ei.getHelp}),ek=(0,_.jsx)(s.Lt.Link,{dataTestId:"header-menu-options-tos",href:x.U5h,iconEnd:"visit",onClick:()=>{ee(61),t()},option:ei.termsOfService}),ez=(0,_.jsx)(s.Lt.Link,{dataTestId:"header-menu-options-policy",href:x.R_9,iconEnd:"visit",onClick:()=>{ee(8004),t()},option:ei.privacyPolicy}),eS=(0,_.jsx)(s.Lt.Link,{dataTestId:"header-menu-options-beta-tester",href:"https://www.pinterest.com/public-beta/",iconEnd:"visit",onClick:()=>{ee(13613),t()},option:ei.betaTester},"header-menu-options-beta-tester"),eT=(0,_.jsx)(s.Lt.Item,{dataTestId:"header-menu-options-logout",onSelect:U,option:ei.logOut}),eL=(0,_.jsxs)(s.Lt.Section,{label:M._('Your accounts', 'SwitchAccountsList.YourAccountsTitle', 'Title for the list of user\'s accounts available for switching on Switch Account Page'),children:[ec,eu,ed,D&&!O?.opt_in_private_account&&e_,eT]},"your-accounts"),eI=(0,_.jsxs)(s.Lt.Section,{label:M._('Your accounts', 'SwitchAccountsList.YourAccountsTitle', 'Title for the list of user\'s accounts available for switching on Switch Account Page'),children:[ec,eu,ed,D&&!O?.opt_in_private_account&&eh,eb]},"your-accounts"),eZ=D&&!N?(0,_.jsx)(h,{paddingY:1}):null,eM=(0,_.jsxs)(s.Lt.Section,{label:M._('Content', 'header.accountsOptionsMenu.contentHeader', 'header for content section of menu'),children:[ef,eZ,em,eP,ey]}),eE=(0,_.jsxs)(s.Lt.Section,{label:M._('Help', 'header.accountsOptionsMenu.helpHeader', 'header for help section of menu'),children:[eA,ej,ew,eC,eg]}),eR=(0,_.jsxs)(s.Lt.Section,{label:M._('Privacy', 'header.accountsOptionsMenu.privacyHeader', 'header for privacy section of menu'),children:[ez,ex]}),eB=(0,_.jsxs)(s.Lt.Section,{label:"",children:[ek,eT]}),eD=(0,_.jsxs)(s.Lt.Section,{label:"",children:[(0,_.jsx)("style",{children:'#VerticalNav-MoreOptions-Flyout [role="presentation"] {display: none;}'}),eZ,em]},"section-account-claiming"),eO=I?[eg,eb,ev,eD,ey,ew,eC,eP,ef,ex,eA,ej,ek,ez,eS]:(0,_.jsxs)(s.Lt.Section,{label:M._('More options', 'header.accountsOptionsMenu.optionsHeader', 'header for options section of menu'),children:[eg,eb,ev,eZ,em,ey,ew,eC,eP,ef,ex,eA,ej,ek,ez,eS]});return{currentlyIn:(0,_.jsxs)(s.Lt.Section,{label:M._('Currently in', 'SwitchAccountsList.CurrentlyInTitle', 'Title for currently logged in account on Switch Account Page'),children:[!!ea&&(0,_.jsx)(s.Lt.Item,{onSelect:()=>er?et(ea,void 0):K(ea),option:ei.currentAccount,selected:ei.currentAccount,children:(0,_.jsx)(s.rU,{href:d?`/${ea.username}/`:`${P.C0}/${ea.username}/`,underline:"none",children:(0,_.jsx)(p.Z,{isCurrentAccount:!0,user:ea})})}),!O?.opt_in_private_account&&ep]},"currently-in"),yourAccount:G?eI:eL,moreOptions:G?[eM,eE,eR,eB]:eO,settingsAndSupport:[eg,eb,ev,em,eP,ey,eS,(0,_.jsxs)(s.Lt.Section,{label:M._('Support', 'SettingsMenu.SupportOptions', 'Menu section with support options'),children:[ej,(0,_.jsx)(s.Lt.Link,{href:`${x.iYv}/tools/widget-builder/?type=profile&url=${encodeURIComponent(`https://${window.location.hostname}/${ea?.username||""}/`)}`,iconEnd:"visit",onClick:()=>{E({event_type:101,component:218,element:8001})},option:{label:M._('Create widget', 'A link to create an embeddable widget', 'A link to create an embeddable widget'),value:"make-widget-link"}},"make-widget-link"),(0,_.jsx)(s.Lt.Link,{href:x.hwP,iconEnd:"visit",onClick:()=>{E({event_type:101,component:218,element:8011})},option:{label:M._('Removals', 'menu item that takes user to the Pinterest copyright page', 'menu item that takes user to the Pinterest copyright page'),value:"removals"}},"removals"),(0,_.jsx)(s.Lt.Link,{href:"https://help.pinterest.com/en/article/personalized-ads-on-pinterest",onClick:()=>{E({event_type:101,component:218,element:10406})},option:{label:M._('Personalized Ads', 'menu item that takes user to the Pinterest personalized ads page', 'menu item that takes user to the Pinterest personalized ads page'),value:"personalized-ads"}},"personalized-ads"),ex,ez,ek]},"support"),(0,_.jsx)(s.Lt.Section,{label:M._('Resources', 'SettingsMenu.Resources', 'Menu section with resource links'),children:(0,_.jsxs)(s.xu,{direction:"row",display:"flex",paddingX:2,width:240,wrap:!0,children:[(0,_.jsx)(A.O,{onClick:()=>{E({event_type:101,component:218,element:8006})},text:M._('About', 'menu item that takes user to the Pinterest about page', 'menu item that takes user to the Pinterest about page'),url:x.wUZ}),(0,_.jsx)(A.O,{onClick:()=>{E({event_type:101,component:218,element:8007})},text:M._('Blog', 'menu item that takes user to the Pinterest blog', 'menu item that takes user to the Pinterest blog'),url:"https://www.pinterest.com/_/_/blog/"}),(0,_.jsx)(A.O,{onClick:()=>{E({event_type:101,component:218,element:8008})},text:M._('Businesses', 'menu item that takes user to the Pinterest for business page', 'menu item that takes user to the Pinterest for business page'),url:x.NWh}),(0,_.jsx)(A.O,{onClick:()=>{E({event_type:101,component:218,element:8009})},text:M._('Careers', 'menu item that takes user to the Pinterest careers page', 'menu item that takes user to the Pinterest careers page'),url:x.t_w}),(0,_.jsx)(A.O,{onClick:()=>{E({event_type:101,component:218,element:8010})},text:M._('Developers', 'menu item that takes user to the Pinterest developers page', 'menu item that takes user to the Pinterest developers page'),url:x.iYv})]})},"resources")]}}({onDismiss:t,advertiser:n,showAdsSupportOption:d,isWwwSite:D,isVerticalNavEnabled:Y,handleFocus:()=>{e?.focus()}});return(0,_.jsx)(Z.Z,{children:(0,_.jsxs)(s.Lt,{anchor:e,disableMobileUI:!0,headerContent:B?(0,_.jsxs)(s.kC,{alignItems:"center",direction:"row",gap:{row:2,column:0},children:[(0,_.jsx)(s.hU,{accessibilityLabel:H._('Close settings and support menu', 'navBar.settingsMenu.header', 'Accessibility label for the button to close settings menu'),icon:"cancel",onClick:t,size:"sm"}),(0,_.jsx)(s.X6,{size:"400",children:H._('Settings & Support', 'navBar.settingsMenu.header', 'Header text for the settings menu')})]}):null,id:N,idealDirection:O,isWithinFixedContainer:!Y,onDismiss:t,zIndex:F,children:[c&&(U?(0,_.jsxs)(s.Lt.Section,{label:H._('Oh no! You\'re no longer logged into', 'header.accountsOptionsMenu.failedAccount', 'Full sentence: "Oh no! You\'re no longer logged into <user\'s account>". Text telling user that they are no longer logged into an account after trying to switch to it'),children:[(0,_.jsx)(s.Lt.Item,{onSelect:()=>{},option:G.failedAccount,children:(0,_.jsx)(p.Z,{user:U})}),(0,_.jsx)(I,{failedAccount:U,handleReauthAccount:$,handleRemoveUnauthAccount:W})]}):[V,q]),R?X:null,B?J:null]})})}},699666:function(e,t,n){n.d(t,{Z:()=>r});var s=n(521009),o=n(821342),i=n(749872),l=n(593891),a=n(959989);function r(){let e=(0,o.Z)(),t=(0,s.Z)(),n=(0,l.aU)();return function(){t({event_type:101,component:8,element:8005}),(0,a.lv)()>1?(e.isAuth&&((0,i.RD)(e.id),(0,i.CV)("utils.user_deleted",{deleted_user:e.id})),n({redirectUrl:"/",source:"user_header",localStorageItems:(0,a.Q)()})):((0,i.CV)("utils.group_deleted"),n({redirectUrl:"/",source:"user_header"}))}}},525958:function(e,t,n){n.d(t,{Dm:()=>i,Y3:()=>o,YG:()=>s,qX:()=>l});let s=e=>["MOBILE","DESKTOP"].includes(e),o=e=>"STERLING"===e,i=e=>"ANALYTICS"===e,l=e=>"TRENDS"===e},538281:function(e,t,n){n.d(t,{Z:()=>l});var s=n(20256),o=n(525839),i=n(785893);function l({accessibilityLabel:e,fixedPosition:t,rounding:n}){let l=(0,o.ZP)();return(0,i.jsxs)(s.xu,{children:[(0,i.jsx)(s.xu,{alignItems:"center",bottom:!0,display:"flex",justifyContent:"center",left:!0,opacity:1,position:t?"fixed":"absolute",right:!0,top:!0,zIndex:new s.Ry(101),children:(0,i.jsx)(s.xH,{accessibilityLabel:e||l._('Loading', 'Label for loading spinner', 'Label for loading spinner'),show:!0})}),(0,i.jsx)(s.xu,{bottom:!0,color:"default",left:!0,opacity:.7,position:t?"fixed":"absolute",right:!0,rounding:n,top:!0,zIndex:new s.Ry(100)})]})}},738827:function(e,t,n){n.d(t,{Z:()=>s});function s(e,t){return e.includes(t)||e.includes(80)}},124320:function(e,t,n){n.d(t,{Z:()=>o});var s=n(667294);let o=function(e,t){let n=(0,s.useRef)(e),o=(0,s.useRef)(void 0),i=(0,s.useRef)(void 0);(0,s.useEffect)(()=>{n.current=e},[e]),(0,s.useEffect)(()=>()=>{o.current&&clearTimeout(o.current)},[t]);let l=(0,s.useCallback)((...e)=>{i.current=e,o.current&&clearTimeout(o.current),o.current=window.setTimeout(()=>{n.current(...e),i.current=void 0},t)},[t]);return l.flush=(0,s.useCallback)(()=>{if(o.current&&(clearTimeout(o.current),o.current=void 0),i.current){let e=i.current;return i.current=void 0,n.current(...e)}},[]),l.cancel=(0,s.useCallback)(()=>{o.current&&(clearTimeout(o.current),o.current=void 0),i.current=void 0},[]),l}},662137:function(e,t,n){n.d(t,{Z:()=>s});let s="M11 23H5a4 4 0 0 1-4-4V5a4 4 0 0 1 4-4h6zm12-4a4 4 0 0 1-4 4h-6V13h10zM19 1a4 4 0 0 1 4 4v6H13V1z"},734308:function(e,t,n){n.d(t,{Z:()=>o});var s=n(483180);let o=()=>{let{hostname:e}=window.location,t=e.includes("pinterdev")&&!e.includes("ads.pinterdev"),n=e.includes("pinterest")&&(e.startsWith("www")||e.startsWith("latest")||e.startsWith("testing"));return t||n?e:e.includes("ads-latest")?"latest.pinterest.com":s.Vi}},424297:function(e,t,n){n.d(t,{ak:()=>a,j3:()=>l,yv:()=>i});var s=n(525839),o=n(15667);function i(e){return e&&["DE","AT","CH"].includes(e.toUpperCase())}function l(){let{country:e=""}=(0,o.B)();return i(e)}function a(){return (0, s.ZP)()._('Imprint', 'impressumText', 'Text for link to impressum for Germany, Austra, or Switzerland')}},947050:function(e,t,n){n.d(t,{Z:()=>o});var s=n(667294);function o(e){let{animationData:t,autoplay:o,initialSegment:i,loop:l,onComplete:a,onConfigReady:r,onDataFailed:c,onDataReady:u,onDestroy:d,onDOMLoaded:_,onEnterFrame:h,onLoadedImages:p,onLoopComplete:m,onSegmentStart:f}=e,[g,b]=(0,s.useState)(null),[v,y]=(0,s.useState)(!1),x=(0,s.useRef)(null),P=(0,s.useRef)(null),A=async()=>{b(await n.e("13000").then(n.t.bind(n,98234,23)))};return(0,s.useEffect)(()=>{A()},[]),(0,s.useEffect)(()=>{if(!P.current||!g||!t||!t.w||!t.h)return;x.current?.destroy();let n={...e,container:P.current};x.current=g.loadAnimation(n),y(!!x.current)},[P,x,t,g,e]),(0,s.useEffect)(()=>{x.current&&(x.current.loop=!!l,l&&x.current.isPaused&&x.current.play())},[l]),(0,s.useEffect)(()=>{x.current&&(x.current.autoplay=!!o)},[o]),(0,s.useEffect)(()=>{if(x.current){if(!i)return void x.current.resetSegments(!1);Array.isArray(i)&&i.length&&((x.current.currentRawFrame<i[0]||x.current.currentRawFrame>i[1])&&(x.current.currentRawFrame=i[0]),x.current.setSegment(i[0],i[1]))}},[i]),(0,s.useEffect)(()=>{if(!x.current||!v)return()=>{};let e=[{name:"complete",handler:a},{name:"loopComplete",handler:m},{name:"enterFrame",handler:h},{name:"segmentStart",handler:f},{name:"config_ready",handler:r},{name:"data_ready",handler:u},{name:"data_failed",handler:c},{name:"loaded_images",handler:p},{name:"DOMLoaded",handler:_},{name:"destroy",handler:d}].filter(e=>null!=e.handler).map(e=>(x.current?.addEventListener(e.name,e.handler),()=>{x.current?.removeEventListener(e.name,e.handler)}));return()=>{e.forEach(e=>e())}},[v,a,m,h,f,r,u,c,p,_,d]),{animationContainerRef:P,play:()=>{x.current?.play()},stop:()=>{x.current?.stop()},pause:()=>{x.current?.pause()},setSpeed:e=>{x.current?.setSpeed(e)},goToAndStop:(e,t)=>{x.current?.goToAndStop(e,t)},goToAndPlay:(e,t)=>{x.current?.goToAndPlay(e,t)},setDirection:e=>{x.current?.setDirection(e)},playSegments:(e,t)=>{x.current?.playSegments(e,t)},setSubframe:e=>{x.current?.setSubframe(e)},getDuration:e=>x.current?.getDuration(e),destroy:()=>{x.current?.destroy()},animationLoaded:v,animationItem:x.current}}},38787:function(e,t,n){n.d(t,{Kw:()=>a,RD:()=>r,dD:()=>u});var s=n(575108),o=n(686319),i=n(959989);let l=["partner.biz_ownership_email","partner.business_name","partner.contact_email","partner.contact_phone","partner.contact_phone_country()","partner.enable_profile_address","partner.enable_profile_message","partner.is_linked_business","partner.profile_place()","place.country","place.extra_street","place.locality","place.postal_code","place.region","place.street","user.businesses()","user.email","user.fast_advertiser_info_has_any_managed_advertisers","user.full_name","user.id","user.image_medium_url","user.owners()","user.partner()","user.username"],a=async()=>{let e=await s.Z.create("UserSessionResource",{session_accounts:!0}).callCreate();return e.resource_response.data?.session_accounts||{}},r=(e,t)=>{let n=Object.freeze({});try{n=(0,i.rl)()}catch{e(`${t}.removeAccountDataFromLocalStorage.jsonParseFailed`)}let s=Object.keys(n);if(e(`${t}.removeAccountDataFromLocalStorage.start`),0===s.length||n[s[0]].logged_in)return void e(`${t}.removeAccountDataFromLocalStorage.early_return`);let o=s.reduce((e,t)=>({...e,[t]:{logged_in:!0}}),{});(0,i.r8)(o),e(`${t}.removeAccountDataFromLocalStorage.updated`)},c=e=>({id:e.id,username:e.username,email:e.email,fullName:e.full_name,imageMediumUrl:e.image_medium_url,imageLargeUrl:e.image_large_url||"",owners:e.owners||null,partner:e.partner?{bizContactEmail:e.partner?.contact_email||"",bizOwnershipEmail:e.partner?.biz_ownership_email||e.email||"",businessName:e.partner?.business_name,isLinkedBusiness:e.partner?.is_linked_business}:null,businesses:(e?.businesses||[]).map(t=>({...c(t),partner:{bizContactEmail:t.partner?.contact_email||"",bizOwnershipEmail:t.partner?.biz_ownership_email||e.email||"",businessName:t.partner?.business_name??"",isLinkedBusiness:t.partner?.is_linked_business??!1}}))}),u=async e=>{let t=await a(),n=e.id;t[n]||(t[n]={logged_in:!0});let s=Object.keys(t||{}).map(e=>({uri:`v3/users/${e}/`,method:"GET",params:{fields:l.join(",")}})),i=(await (0,o.Z)({url:"/v3/batch/",method:"POST",data:{requests:JSON.stringify(s)}})).resource_response.data;if(i&&Object.keys(i).length>0){var r=Object.keys(i).filter(e=>"success"===i[e].status).map(e=>c(i[e].data));let e=r.every(e=>!!e.fullName)?"fullName":"username";return[...r].sort((t,n)=>t[e]>n[e]?1:n[e]>t[e]?-1:0)}return[]}},230117:function(e,t,n){n.d(t,{Z:()=>s});let s=e=>Array.from(e)[0].toUpperCase()+Array.from(e).slice(1).join("")},414096:function(e,t,n){n.d(t,{Z:()=>u});var s=n(667294),o=n(20256),i=n(525839),l=n(252564),a=n(785893);let r=new o.H3([l.Z]);class c extends s.Component{constructor(...e){var t,n,s;super(...e),t="handleConnectionChange",n=e=>{this.forceUpdate(),"offline"===e.type?window.addEventListener("online",this.handleConnectionChange):window.removeEventListener("online",this.handleConnectionChange)},(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:s+"")in this?Object.defineProperty(this,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[t]=n}componentDidMount(){window.addEventListener("offline",this.handleConnectionChange)}componentWillUnmount(){window.removeEventListener("offline",this.handleConnectionChange)}render(){return!navigator.onLine&&(0,a.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{bottom:"90px"}},position:"fixed",width:"100%",zIndex:r,children:(0,a.jsx)(o.kC,{alignItems:"center",height:"100%",justifyContent:"center",width:"100%",children:(0,a.jsx)(o.FN,{text:this.props.i18n._('Hmm...you\'re not connected to the internet', 'Toast that displays when a user is offline', 'Toast that displays when a user is offline'),type:"error"})})})}}function u(e){let t=(0,i.ZP)();return(0,a.jsx)(c,{...e,i18n:t})}},133011:function(e,t,n){n.d(t,{Z:()=>r});var s=n(667294),o=n(20256),i=n(525839),l=n(785893);let a=new o.Ry(1e4);function r(){let[e,t]=(0,s.useState)(!1),[n,r]=(0,s.useState)(null),c=(0,i.ZP)(),u=(0,s.useCallback)(()=>{n?.removeAttribute("tabindex"),n?.removeEventListener("blur",u),n?.removeEventListener("focusout",u)},[n]);(0,s.useEffect)(()=>(n||r(document.querySelector('[role="main"]')),()=>{n?.removeEventListener("blur",u),n?.removeEventListener("focusout",u)}),[n,u]);let d=(0,l.jsx)(o.xu,{color:"primary",children:(0,l.jsx)(o.kC,{alignItems:"center",height:75,justifyContent:"center",width:"100%",children:(0,l.jsx)(o.xv,{align:"center",color:"inverse",underline:e,weight:"bold",children:c._('Skip to content', 'SkipToContent.Message', 'Skip to content accessibility feature messge ')})})});return(0,l.jsx)(o.iP,{onBlur:()=>t(!1),onFocus:()=>t(!0),onTap:()=>{n?.setAttribute("tabindex","-1"),n?.focus({preventScroll:!0}),n?.addEventListener("blur",u),n?.addEventListener("focusout",u)},children:e?(0,l.jsx)(o.xu,{"data-test-id":"skipToContentContainer",position:"fixed",width:"100%",zIndex:a,children:d}):(0,l.jsx)(o.xu,{"data-test-id":"hiddenSkipToContentContainer",height:1,margin:-1,overflow:"hidden",position:"absolute",width:1,children:d})})}},599402:function(e,t,n){n.d(t,{Z:()=>i});var s=n(20256),o=n(785893);function i({count:e,iconSlot:t}){let n=e<100?`${e}`:"99+";return(0,o.jsxs)(s.xu,{position:"relative",children:[t,e>0&&(0,o.jsx)(s.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{right:-6-2*n.length,top:-8,padding:`0 ${3===n.length?"2px":"3px"} 0 2px`}},display:"flex",justifyContent:"center",position:"absolute",children:(0,o.jsx)(s.z$,{accessibilityLabel:"",count:e})})]})}},817618:function(e,t,n){n.d(t,{Z:()=>i});var s=n(341742),o=n(104659);function i({children:e}){let{setAppFocusState:t}=(0,o.G)();return(0,s.Z)(()=>(t(!1),()=>{t(!0)})),e}},570032:function(e,t,n){n.d(t,{q:()=>_,y:()=>h});var s=n(667294),o=n(274320),i=n(15667),l=n(686319),a=n(817998);function r(e,t){(0,a.T)(t)&&(0,l.Z)({method:"PUT",url:`/ads/v4/preferences/${e}/`,data:{level:"ADVERTISER",key:"CAMPAIGN_TOOL_PREFERENCE",preferences:t}})}var c=n(766922),u=n(785893);let d=(0,s.createContext)({campaignToolPreference:null,updateCampaignToolPreference:r}),_=({children:e})=>{let[t,n]=(0,s.useState)(null),l=(0,o.FJ)(),{advertiser:a}=(0,i.B)(),_=async(e,t)=>{r(e,t),n(t)};(0,s.useEffect)(()=>{(async()=>{a&&n(await (0,c.f)(a.id))})()},[a,l]);let h=(0,s.useMemo)(()=>({campaignToolPreference:t,updateCampaignToolPreference:_}),[t]);return(0,u.jsx)(d,{value:h,children:e})},h=()=>(0,s.useContext)(d)},766922:function(e,t,n){n.d(t,{Z:()=>u,f:()=>c});var s=n(667294),o=n(686319),i=n(274320),l=n(15667),a=n(817998);let r="ADVERTISER",c=async e=>{let t;try{let n;t=(n=(await (0,o.Z)({method:"GET",url:`/ads/v4/preferences/${e}/`,data:{level:r,key:"CAMPAIGN_TOOL_PREFERENCE"}})).resource_response.data)&&n[r]&&n[r][0]&&n[r][0].preferences}catch{return null}return t&&(0,a.T)(t)?t:null},u=()=>{let[e,t]=(0,s.useState)(null),n=(0,i.FJ)(),{advertiser:o}=(0,l.B)();return(0,s.useEffect)(()=>{(async()=>{o&&t(await c(o.id))})()},[o,n]),e}},22700:function(e,t,n){n.d(t,{k:()=>s,l:()=>o});let{Provider:s,get:o}=(0,n(729434).Z)("flyoutContext")},226513:function(e,t,n){n.d(t,{Z:()=>c});var s=n(667294),o=n(20256),i=n(22700),l=n(785893);function a(e,t,n){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:s+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let r=new o.Ry(752);class c extends s.Component{constructor(...e){super(...e),a(this,"state",{flyout:void 0,showOnTopOfModal:!1,tooltip:void 0}),a(this,"showFlyoutWithinMasonry",(e,t=!1)=>{let n={...e,onDismiss:()=>{e.onDismiss&&e.onDismiss(),this.removeFlyoutFromMasonry()},positionRelativeToAnchor:!1};this.setState({flyout:{props:n},showOnTopOfModal:t})}),a(this,"removeFlyoutFromMasonry",()=>{this.setState({flyout:void 0})}),a(this,"showTooltipWithinMasonry",(e,t=!1)=>{let n={...e,onDismiss:()=>{e.onDismiss&&e.onDismiss(),this.removeTooltipFromMasonry()}};this.setState({tooltip:{props:n},showOnTopOfModal:t})}),a(this,"removeTooltipFromMasonry",()=>{this.setState({tooltip:void 0})})}getContext(){return{showTooltipWithinMasonry:this.showTooltipWithinMasonry,removeTooltipFromMasonry:this.removeTooltipFromMasonry,showFlyoutWithinMasonry:this.showFlyoutWithinMasonry,removeFlyoutFromMasonry:this.removeFlyoutFromMasonry}}render(){let{flyout:e,tooltip:t,showOnTopOfModal:n}=this.state,{children:a}=this.props,c=(e||t)&&n;return(0,l.jsx)(i.k,{value:this.getContext(),children:(0,l.jsxs)(s.Fragment,{children:[a,(0,l.jsxs)(o.xu,{position:c?"fixed":void 0,top:!!c||void 0,zIndex:c?r:void 0,children:[e&&(0,l.jsx)(o.J2,{_deprecatedShowCaret:e.props.showCaret,anchor:e.props.anchor,color:e.props.color,idealDirection:e.props.idealDirection,onDismiss:e.props.onDismiss,positionRelativeToAnchor:e.props.positionRelativeToAnchor,shouldFocus:e.props.shouldFocus,size:e.props.size,children:e.props.children}),t&&(0,l.jsx)(o.J2,{_deprecatedShowCaret:t.props.showCaret,anchor:t.props.anchor,color:"darkGray",idealDirection:t.props.idealDirection,onDismiss:t.props.onDismiss,positionRelativeToAnchor:t.props.positionRelativeToAnchor,shouldFocus:!1,size:"md",children:(0,l.jsx)(o.xu,{column:12,padding:3,children:t.props.children})})]})]})})}}},146621:function(e,t,n){n.d(t,{Z:()=>s});let s=(0,n(667294).createContext)(()=>null)},427141:function(e,t,n){n.d(t,{Z:()=>o});var s=n(199593);function o(){let{conversations:{data:e}}=(0,s.Z)();return Array.from(Object.keys(e).map(t=>e[t]).filter(e=>e.users&&e.last_message)).sort((e,t)=>new Date((t.last_message||t).created_at).getTime()-new Date((e.last_message||e).created_at).getTime())}},252440:function(e,t,n){n.d(t,{O:()=>c,Z:()=>u});var s=n(20256),o=n(521009),i=n(424297),l=n(525839),a=n(694955),r=n(785893);let c=({onClick:e,text:t,url:n})=>(0,r.jsx)(s.xu,{role:"listitem",children:(0,r.jsx)(s.xv,{color:"subtle",size:"200",weight:"bold",children:(0,r.jsx)(s.rU,{href:n,onClick:e,target:"blank",children:(0,r.jsx)(s.xu,{padding:1,children:t})})})});function u(){let e=(0,l.ZP)(),t=(0,o.Z)(),n=e=>()=>t({event_type:101,component:218,element:e}),u=(0,i.j3)(),d=(0,i.ak)();return(0,r.jsxs)(s.xu,{direction:"column",display:"flex",paddingX:3,paddingY:2,role:"list",width:"100%",wrap:!0,children:[(0,r.jsx)(c,{onClick:n(8006),text:e._('About', 'menu item that takes user to the Pinterest about page', 'menu item that takes user to the Pinterest about page'),url:a.wUZ}),(0,r.jsx)(c,{onClick:n(8007),text:e._('Blog', 'menu item that takes user to the Pinterest blog', 'menu item that takes user to the Pinterest blog'),url:"https://www.pinterest.com/_/_/blog/"}),(0,r.jsx)(c,{onClick:n(8008),text:e._('Businesses', 'menu item that takes user to the Pinterest for business page', 'menu item that takes user to the Pinterest for business page'),url:a.NWh}),(0,r.jsx)(c,{onClick:n(8009),text:e._('Careers', 'menu item that takes user to the Pinterest careers page', 'menu item that takes user to the Pinterest careers page'),url:a.t_w}),(0,r.jsx)(c,{onClick:n(8010),text:e._('Developers', 'menu item that takes user to the Pinterest developers page', 'menu item that takes user to the Pinterest developers page'),url:a.iYv}),(0,r.jsx)(c,{onClick:n(8011),text:e._('Removals', 'menu item that takes user to the Pinterest copyright page', 'menu item that takes user to the Pinterest copyright page'),url:a.hwP}),(0,r.jsx)(c,{onClick:n(8004),text:e._('Privacy Policy', 'additionalLinks.privacyPolicy', 'menu item that takes user to the Pinterest privacy policy page'),url:a.R_9}),(0,r.jsx)(c,{onClick:n(10406),text:e._('Personalized Ads', 'menu item that takes user to the Pinterest personalized ads page', 'menu item that takes user to the Pinterest personalized ads page'),url:"https://www.pinterest.com/_/_/help/articles/personalized-ads-pinterest"}),(0,r.jsx)(c,{onClick:n(13335),text:e._('Your Privacy Rights', 'additionalLinks.yourPrivacyRights', 'menu item that takes user to the Privacy Settings page'),url:"https://www.pinterest.com/settings/privacy/"}),(0,r.jsx)(c,{onClick:n(8012),text:e._('Terms', 'menu item that takes user to the Pinterest terms page', 'menu item that takes user to the Pinterest terms page'),url:a.U5h}),u&&(0,r.jsx)(c,{onClick:n(8013),text:d,url:a.$BF})]})}},320923:function(e,t,n){n.d(t,{Z:()=>u});var s=n(667294),o=n(20256),i=n(830811),l=n(980787),a=n(839626),r=n(785893);let c=({anchorElementRef:e,children:t,experienceAnchor:n})=>n?(0,r.jsx)(a._7,{anchor:".HomeButton2",anchorElementRef:e.current,containerBoxConfig:{display:"flex",height:"100%"},children:t}):t,u=({accessibilityLabel:e,compactMode:t,icon:n,rightIcon:a,selected:u,text:d,type:_="link",url:h,contextData:p,onClick:m})=>{let{logContextEvent:f}=(0,l.u)(),[g,b]=(0,s.useState)(i.o7L),v=(0,s.useRef)(null),y=()=>{b(i.Toi)},x=()=>{b(i.o7L)},P=()=>{b(i.o7L)},A=()=>{b(i.Toi)},w=e=>{if(p){let{event:e,component:t,element:n}=p;f({event_type:e,component:t,element:n})}m&&m(e)},C=(0,r.jsx)(o.Tg,{accessibilityLabel:e,href:h||"",onBlur:P,onFocus:A,onMouseEnter:y,onMouseLeave:x,onTap:({event:e})=>w(e),rounding:4,children:(0,r.jsx)(o.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:g}},display:"flex",height:48,justifyContent:"center",rounding:4,width:48,children:n})});if(a||"link"!==_||!h||t){if("link"===_&&(t&&n||a)){let s,i,l="pill";l=n||a?d&&!t?"pill":"circle":"pill",n&&(s=n),a&&(i=a);let c=d instanceof Object?d:(0,r.jsx)(o.xv,{color:u?"default":"subtle",overflow:"normal",size:"200",weight:"bold",children:d});C=(0,r.jsx)(o.Tg,{accessibilityLabel:e,href:h||"",onBlur:P,onFocus:A,onMouseEnter:y,onMouseLeave:x,onTap:({event:e})=>w(e),rounding:l,children:(0,r.jsxs)(o.kC,{alignItems:"center",justifyContent:"start",children:[s,!!d&&!t&&(0,r.jsx)(o.xu,{paddingX:2,children:c}),i]})})}}else C=(0,r.jsx)(c,{anchorElementRef:v,experienceAnchor:"/"===h?".HomeButton2":"",children:(0,r.jsx)(o.Tg,{ref:v,accessibilityLabel:e,href:h,onBlur:P,onFocus:A,onMouseEnter:y,onMouseLeave:x,onTap:({event:e})=>w(e),rounding:"pill",children:(0,r.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:g}},paddingX:4,paddingY:4,rounding:"pill",children:(0,r.jsx)(o.xv,{color:u?"default":"subtle",overflow:"normal",weight:"bold",children:d})})})});return(0,r.jsx)(o.xu,{position:"relative",children:C})}},30536:function(e,t,n){n.d(t,{F:()=>s,I:()=>o});let{Provider:s,get:o}=(0,n(729434).Z)("SiteParametersContextType")},966279:function(e,t,n){n.d(t,{Jo:()=>u,mv:()=>_,nJ:()=>d});var s=n(667294),o=n(729434);let i={hiddenNews:{}};function l(e,t){if(e=e||i,"HIDDEN_NEWS_ADD_ID_TO_HIDDEN_STATUS"!==t.type)return e;{let{payload:{id:n,isHidden:s}}=t;return{hiddenNews:{...e?.hiddenNews,[n]:s}}}}var a=n(785893);let{Provider:r,get:c}=(0,o.Z)("HiddenNews");function u({children:e}){let[t,n]=(0,s.useReducer)(l,i),o=(0,s.useMemo)(()=>({dispatch:n,hiddenNews:t}),[n,t]);return(0,a.jsx)(r,{value:o,children:e})}function d(){let{dispatch:e,hiddenNews:{hiddenNews:t}}=c();return(0,s.useMemo)(()=>({updateNewsIdToHiddenNews:(t,n)=>{e({type:"HIDDEN_NEWS_ADD_ID_TO_HIDDEN_STATUS",payload:{id:t,isHidden:n}})},getShownNewsCount:e=>e.filter(e=>e&&e.id&&!(e.id in t&&t[e.id])).length}),[e,t])}function _(){let{hiddenNews:e}=c();return e}},168590:function(e,t,n){n.d(t,{Z:()=>a,b:()=>l});var s=n(506662);let o=[s.Gl,s.PY,s.jC,s.Xn,s.b_,s.oF,s.dt,s.x7,s.cY,s.bb],i=[...o,s.Ig];function l(e){return i.every(t=>!t(e))}function a(e){return o.every(t=>!t(e))}},901971:function(e,t,n){n.d(t,{P:()=>h,j:()=>p});var s=n(667294),o=n(729434),i=n(355940),l=n(982166),a=n(821342),r=n(525839),c=n(78762),u=n(785893);let d=(0,c.Z)(()=>n.e("53732").then(n.bind(n,187948)),void 0,e=>187948,"app-www-ReportBug-ReportBug"),{Provider:_,get:h}=(0,o.Z)("reportBugModalContext");function p({children:e}){let t=(0,r.ZP)(),[n,o]=(0,s.useState)(!1),c=(0,a.Z)(),h=(0,s.useCallback)(()=>{o(!0)},[]),p=(0,s.useMemo)(()=>({handleShowReportBugModal:h}),[h]);return(0,u.jsxs)(s.Fragment,{children:[(0,u.jsx)(_,{value:p,children:e}),n&&c.isAuth&&(0,u.jsx)(l.ZP,{accessibilityModalLabel:t._('Report bug', 'header.accountsOptionsMenu.logout', 'Modal accessibility label for reporting a bug'),onDismiss:()=>{o(!1)},children:(0,u.jsx)(i.Z,{name:"SafeSuspense_ReportBugModal_ReportBug",children:(0,u.jsx)(d,{onDismiss:()=>{o(!1)},username:c.username})})})]})}},244529:function(e,t,n){n.d(t,{Z:()=>c});var s=n(616550),o=n(821342),i=n(506662),l=n(274320),a=n(15667),r=n(168590);function c(){let e=(0,o.Z)(),{isRTL:t}=(0,a.B)(),n=(0,s.TH)(),{checkExperiment:c}=(0,l.ru)(),u=t&&c("web_vertical_nav_rtl").anyEnabled;return{enabled:(0,r.Z)(n)&&(!t||u)&&e.isAuth&&!e.isPartner&&!(0,i.OK)(n)}}},631395:function(e,t,n){n.d(t,{QV:()=>m,Qj:()=>b,Td:()=>g});var s=n(667294),o=n(20256),i=n(830811),l=n(521009),a=n(662137),r=n(525839),c=n(77836);let u={home:{default:"home",selected:"home-fill"},create:{default:"square-plus",selected:"square-plus-fill"},today:{default:"compass",selected:"compass-fill"},notifications:{default:"bell",selected:"bell-fill"},messages:{default:"speech-ellipsis",selected:"speech-ellipsis-fill"},moreOptions:{default:"cog",selected:"cog-fill"},shopping:{default:"shopping-bag",selected:"shopping-bag-fill"},categories:{default:"view-type-default",selected:"view-type-default-fill"},board:{default:"board",selected:void 0}};var d=n(616550),_=n(921825),h=n(785893);function p(e){let{preload:t}=(0,_.G)(),{onClick:n,_onMouseEnter:s,preloadExtent:i="Both",route:l,...a}=e;return(0,h.jsx)(o.rU,{_onMouseEnter:e=>{try{s?.(e)}catch{}"None"!==i&&t(l,i)},href:(0,d.Gn)(l.kind,l.routeParams),onClick:e=>{try{n?.(e)}catch{}t(l,"Both")},...a})}let m=({iconName:e,selected:t})=>(0,h.jsx)(o.JO,{accessibilityLabel:"",color:"default",icon:t?u[e].selected:u[e].default,size:c.nQ}),f=({count:e})=>{if(!e||e<=0)return null;let t=e<100?`${e}`:"99+";return(0,h.jsx)(o.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{pointerEvents:"none",top:6,left:`calc(50% + ${4-t.length}px)`}},display:"flex",justifyContent:"center",position:"absolute",children:(0,h.jsx)(o.z$,{accessibilityLabel:"",count:e})})},g=(0,s.forwardRef)(({accessibilityLabel:e,accessibilityPopupRole:t,accessibilityControls:n,badgeCount:s,tooltipText:i,href:l,iconName:r,selected:d,onClick:_,onMouseDown:p,onMouseEnter:m,dataTestId:g},b)=>{let v=i||e,y=!!t,x=d?u[r].selected:u[r].default,P="board"===r&&d,A={text:v,idealDirection:c.Mh,zIndex:c.BO},w=c.yg,C=l?(0,h.jsx)(o.I_,{accessibilityLabel:e,dangerouslySetSvgPath:P?{__path:a.Z}:void 0,dataTestId:g,href:l,icon:P?void 0:x,onClick:_,size:w,tooltip:A}):(0,h.jsx)(o.hU,{accessibilityControls:n,accessibilityExpanded:y?d:void 0,accessibilityHaspopup:y,accessibilityLabel:e,accessibilityPopupRole:t,dataTestId:g,icon:x,onClick:_,size:w,tooltip:A});return(0,h.jsxs)(o.xu,{ref:b,onMouseDown:p,onMouseEnter:m,position:"relative",children:[C,(0,h.jsx)(f,{count:s})]})}),b=(0,s.forwardRef)(({accessibilityLabel:e,accessibilityControls:t,iconName:n,selected:a,onClick:u,onMouseDown:d,onMouseEnter:_,route:f,preloadExtent:g,dataTestId:b,variant:v="short"},y)=>{let x=(0,l.Z)(),P=(0,r.ZP)(),[A,w]=(0,s.useState)("transparent"),[C,j]=(0,s.useState)(!1),k=()=>{_?.(),w(i.Kuk),j(!0)},z=(0,s.useRef)(null),S=(0,c.vg)(P,v);return(0,h.jsx)(o.xu,{onMouseEnter:k,onMouseLeave:()=>{w("transparent"),j(!1)},overflow:"hidden",paddingX:4,position:"relative",children:(0,h.jsx)(o.iP,{ref:y,accessibilityControls:t,accessibilityExpanded:C,accessibilityHaspopup:!0,accessibilityLabel:e,dataTestId:b,onTap:k,rounding:c.dv,tapStyle:c.xp,children:(0,h.jsxs)(o.xu,{ref:z,alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:A}},display:"flex",height:48,id:t,justifyContent:"center",onMouseDown:d,rounding:c.dv,width:48,children:[C&&(0,h.jsx)(o.Lt,{anchor:z.current,disableMobileUI:!0,id:"ideas-dropdown",idealDirection:"right",isWithinFixedContainer:!1,onDismiss:()=>j(!1),zIndex:c.m6,children:S.map(e=>(0,h.jsx)(o.Lt.Link,{href:`/ideas/${e.slug}/${e.value}/`,onClick:()=>{x({object_id_str:e.value,component:8,event_type:101,element:216,aux_data:{interest_id:e.value,interest:e.label}})},option:e},`cat-${e.value}`))}),(0,h.jsx)(p,{onClick:u,preloadExtent:g,route:f,children:(0,h.jsx)(m,{iconName:n,selected:a})})]})})})})},694103:function(e,t,n){n.d(t,{E:()=>s,Z:()=>i});let{Provider:s,get:o}=(0,n(729434).Z)("VerticalNav",{width:0}),i=o},712511:function(e,t,n){n.d(t,{Z:()=>i});var s=n(244529),o=n(403252);function i(){let{enabled:e}=(0,s.Z)(),{enabled:t}=(0,o.Z)();return{enabled:e||t}}},74459:function(e,t,n){n.d(t,{Z:()=>o});var s=n(694103);function o(){let{width:e}=(0,s.Z)();return e}},278964:function(e,t,n){n.d(t,{Z:()=>l});var s=n(667294),o=n(741331),i=n(785893);function l({children:e}){let[t,n]=(0,s.useState)(null),[l,a]=(0,s.useState)(null),[r,c]=(0,s.useState)(!1),[u,d]=(0,s.useState)(null),_=(0,s.useMemo)(()=>({inboxButton:t,setInboxButton:n,profileInboxButton:l,groupBoardMessageButton:u,setProfileInboxButton:a,isUnblockToast:r,setIsUnblockToast:c,setGroupBoardMessageButton:d}),[t,l,r,u]);return(0,i.jsx)(o.Z,{value:_,children:e})}},314708:function(e,t,n){n.d(t,{Z:()=>w});var s=n(667294),o=n(616550),i=n(20256),l=n(355940),a=n(525839),r=n(506662),c=n(821806),u=n(378888),d=n(199593),_=n(543188),h=n(879922),p=n(833036),m=n(536488),f=n(25837),g=n(966279),b=n(244529),v=n(785893);let y=()=>n.e("94057").then(n.bind(n,806413)),x=(0,s.lazy)(y);function P({onClearBadges:e,onClick:t,onPanelChange:n,tooltipText:P}){let A=(0,a.ZP)(),w=(0,o.TH)(),C=(0,s.useRef)(null),[j,k]=(0,s.useState)(!1),[z,S]=(0,s.useState)(!1),[T,L]=(0,s.useState)(!1),[I,Z]=(0,s.useState)(!1),{tab:M,news_hub_id:E}=(0,u.mB)(w.search),{conversations:{conversationsUnseenCount:R,newsHubCount:B}}=(0,d.Z)(),D=e=>{if((0,r.L6)(w))return;let t=Math.max(e,0),n=A._('Pinterest', ' - ', ' -- ');window.document.title=t?`(${t}) ${n}`:n};(0,s.useEffect)(()=>{D(R+B),w.pathname.startsWith("/notifications")&&"inbox"!==M&&k(!0)},[R,B]);let O=()=>{t?.(),k(!j),e(_.S.NEWS_HUB),D(0)};(0,s.useEffect)(()=>{let e=setTimeout(()=>{S(j),L(j),n?.(j)},100);return()=>clearTimeout(e)},[j]),(0,s.useEffect)(()=>{j&&n?.(j)},[j]);let{enabled:N}=(0,b.Z)(),F={verticalNav:B?A._('Updates. You have unread updates.', 'updates.button.badge.updates', 'Accessibility label for updates button with pending unread updates.'):A._('Updates', 'updates.button', 'Accessibility label for updates button with no pending unread updates.'),nonVerticalNav:B?A._('Notifications. You have unread notifications.', 'notifications.button.badge.notifications', 'Accessibility label for notifications button with pending unread messages.'):A._('Notifications', 'notifications.button', 'Accessibility label for notifications button with no pending unread notifications.')},H=P||A._('Notifications', 'navbar.newsButton.tooltip', 'Tooltip text for icon button to show recent notifications');return(0,v.jsxs)(s.Fragment,{children:[(0,v.jsx)(i.xu,{ref:C,"data-test-id":"bell-icon",onMouseEnter:y,position:"relative",children:N?(0,v.jsx)(p.Z,{accessibilityControls:m.o9,accessibilityLabel:F.verticalNav,badgeCount:B,onClick:O,selected:j,tooltipText:H,verticalNavIconName:"notifications"}):(0,v.jsx)(i.u,{accessibilityLabel:"",text:H,zIndex:new i.H3([new i.Ry(f.fe)]),children:(0,v.jsx)(h.Z,{accessibilityLabel:F.nonVerticalNav,badgeCount:B,icon:"bell",onClick:O,selected:j})})}),(0,v.jsx)(g.Jo,{children:(0,v.jsx)("div",{className:"newsHubSidebarWrapper",style:j?{opacity:1,visibility:"visible",transition:"opacity 100ms linear"}:{opacity:0,visibility:"hidden",transition:"visibility 0s 100ms, opacity 100ms linear"},children:z&&(0,v.jsx)(l.Z,{name:"SafeSuspense_AuthNewsButton_NewsHubSidebar",children:(0,v.jsx)(c.Z,{children:(0,v.jsx)(x,{handleDismissPanel:()=>{k(!1),Z(!1)},highlightScrollSidebar:I,newsButton:C.current,show:T,utmNewsHubId:E||null})})})})})]})}var A=n(650088);function w({onClick:e,onPanelChange:t,tooltipText:n}){return(0,v.jsx)(A.Z,{icon:"bell",children:({onClearBadges:s})=>(0,v.jsx)(P,{onClearBadges:s,onClick:e,onPanelChange:t,tooltipText:n})})}},879922:function(e,t,n){n.d(t,{Z:()=>a});var s=n(20256),o=n(599402),i=n(320923),l=n(785893);function a({accessibilityLabel:e,badgeCount:t=0,icon:n="speech-ellipsis",onClick:a,selected:r=!1}){return(0,l.jsx)(i.Z,{accessibilityLabel:e,contextData:{event:101,component:8,element:1187},icon:(0,l.jsx)(o.Z,{count:t,iconSlot:(0,l.jsx)(s.JO,{accessibilityLabel:"",color:r?"default":"subtle",icon:n,size:24})}),onClick:a,text:e,type:"button"},"NotificationsButton")}},833036:function(e,t,n){n.d(t,{Z:()=>l});var s=n(521009),o=n(631395),i=n(785893);function l({dataTestId:e,accessibilityLabel:t,accessibilityControls:n,tooltipText:l,badgeCount:a,onClick:r,selected:c,verticalNavIconName:u}){let d=(0,s.Z)();return(0,i.jsx)(o.Td,{accessibilityControls:n,accessibilityLabel:t,accessibilityPopupRole:"dialog",badgeCount:a,dataTestId:e,iconName:u,onClick:({event:e})=>{d({event_type:101,component:8,element:1187}),r&&r(e)},selected:c,tooltipText:l})}},536488:function(e,t,n){n.d(t,{AI:()=>D,AM:()=>y,AY:()=>X,Ay:()=>a,C:()=>Q,Cc:()=>u,DX:()=>T,GO:()=>R,HJ:()=>r,I2:()=>F,IO:()=>eo,IV:()=>o,J0:()=>f,LL:()=>K,Ng:()=>s,P:()=>w,P3:()=>m,QE:()=>en,QX:()=>ee,Rd:()=>A,So:()=>b,V$:()=>_,Vp:()=>W,WC:()=>k,ZH:()=>Z,aE:()=>p,c4:()=>C,cU:()=>j,ci:()=>z,di:()=>N,gb:()=>J,gs:()=>E,hD:()=>U,hf:()=>O,hp:()=>B,hy:()=>l,ie:()=>g,kJ:()=>q,kc:()=>P,mD:()=>$,mM:()=>S,o9:()=>i,pv:()=>d,qZ:()=>x,qb:()=>v,uW:()=>M,uZ:()=>c,uy:()=>G,vG:()=>Y,wA:()=>h,wl:()=>H,yS:()=>et,yc:()=>I,yf:()=>ei,ys:()=>V,zM:()=>L});let s={BOARD:"board",DID_IT:"userdiditdata",INTEREST:"interest",PIN:"pin",SEARCH:"news_hub_search",STORY:"story",USER:"user"},o=3,i="news-feed-sidebar",l=360,a=15,r=375,c=64,u=36,d=44,_=344,h=164,p=328,m=164,f=108.7,g=3,b=82,v=82,y=164,x=164,P=4,A=164,w=164,C=2,j=82,k=164,z=2,S=2,T=4,L=328,I="290x",Z="170x",M={backgroundColor:"rgba(0, 0, 0, 0.4)"},E=4,R="1px",B=48,D=32,O=36,N="136x136",F=2,H=24,U=20,$=72,W=48,G=54,Y=54,V=4,q=118,X=236,J={BASIC:0,TEXT:1,ROW_WITH_COUNT:2,MINI_PIN_GRID:4,ROW_WITH_COUNT_2:10,MINI_PIN_GRID_2:11,MINI_BOARD_GRID:12,MINI_USER_GRID:13,MINI_SEARCH_GRID:14,MINI_INTEREST_GRID:15,MINI_BOARD_GRID_WITH_ICON:18,HIGHLIGHT_NOTIFICATION:23},K="recommendation",Q="dropdown_item_settings_id",ee=10,et=20,en=5e3,es="#E9E4FF",eo={backgroundColor:es,borderColor:es,paddingLeft:"16px",paddingTop:"16px",paddingBottom:"16px",paddingRight:"12px"},ei={...eo,paddingRight:"10px"}},543188:function(e,t,n){n.d(t,{S:()=>s});let s={NEWS_HUB:1,INBOX:2}},375363:function(e,t,n){n.d(t,{Z:()=>M});var s=n(667294),o=n(616550),i=n(20256),l=n(575108),a=n(111330),r=n(679422),c=n(821342),u=n(525839),d=n(506662),_=n(274320),h=n(753143),p=n(341742),m=n(199593),f=n(427141),g=n(543188),b=n(864289),v=n(966269),y=n(879922),x=n(833036),P=n(25837),A=n(980787),w=n(744862),C=n(15667),j=n(502588),k=n(244529),z=n(785893);function S({conversation:e,anchor:t}){let[n,o]=(0,s.useState)(!1),{dropdownOpen:l,conversationOpen:r}=(0,m.Z)(),c=(0,u.ZP)(),{isRTL:d}=(0,C.B)(),{logContextEvent:_}=(0,A.u)(),{enabled:f}=(0,k.Z)();if((0,p.Z)(()=>{let t=e.last_message,n=h.ZP.getItem(a.Td);t&&t.id!==n&&setTimeout(()=>{o(!0),_({event_type:13,component:14993}),h.ZP.setItem(a.Td,t.id),h.ZP.setItem(a.eQ,Date.now()),window.addEventListener("click",e=>{document.getElementById("message-notif-toast")?.contains(e.target)||o(!1)}),setTimeout(()=>{o(!1)},5e3)},j.XZ)}),!e.last_message||!n)return null;let{sender:g}=e.last_message,b=g.first_name||g.username||"",v=e.last_message.pin?c._('sent you a Pin', 'navbar.messageNotifications.text', 'Message notification text'):c._('sent you a message', 'navbar.messageNotifications.text', 'Message notification text'),y=(0,z.jsxs)(i.xv,{color:"light",inline:!0,children:[(0,z.jsxs)(i.xv,{color:"light",inline:!0,weight:"bold",children:[b," "]}),v]}),x=(0,z.jsxs)(i.xu,{alignItems:"center",display:"flex",flex:"none",justifyContent:"start",paddingX:4,paddingY:2,children:[(0,z.jsx)(i.xu,{marginEnd:3,children:(0,z.jsx)(w.qE,{name:b,size:"sm",src:g.image_large_url??void 0})}),y]}),S="down";return f&&(S=d?"left":"right"),(0,z.jsx)(i.mh,{zIndex:new i.H3([new i.Ry(P.fe)]),children:(0,z.jsx)(i.iP,{onTap:()=>{l(),r(e.id),o(!1),_({event_type:101,component:14993})},children:(0,z.jsx)(i.xu,{id:"message-notif-toast",children:(0,z.jsx)(i.pl,{anchor:t,idealDirection:S,onDismiss:()=>{},role:"dialog",size:"flexible",type:"notification",children:x})})})})}function T(e,t,n){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:s+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class L extends s.Component{constructor(...e){super(...e),T(this,"setButtonRef",e=>{let{setInboxButton:t}=this.props;this.anchor||(this.anchor=e,t(e))}),T(this,"clearBadges",()=>{let{onClearBadges:e}=this.props;e(g.S.INBOX),this.updateBrowserTabTitleCount(0)}),T(this,"handleButtonClick",e=>{let{requireAuth:t,showPanel:n,closeConversationsDropdown:s,openConversationsDropdown:o,onClick:i}=this.props;if(i?.(),t){e&&e.stopPropagation(),t();return}n?s():o(),this.clearBadges()})}componentDidMount(){this.setBrowserTabTitleCountFromProps()}componentDidUpdate(){this.setBrowserTabTitleCountFromProps()}setBrowserTabTitleCountFromProps(){let{conversationsUnseenCount:e,newsHubCount:t}=this.props;this.updateBrowserTabTitleCount(e+t)}updateBrowserTabTitleCount(e){if((0,d.L6)(this.props.location))return;let{i18n:t}=this.props,n=Math.max(e,0),s=t._('Pinterest', ' - ', ' -- ');window.document.title=n?`(${n}) ${s}`:s}render(){let{conversationsUnseenCount:e,i18n:t,showPanel:n,conversationWithUnreadMesage:s,isVerticalNavEnabled:o}=this.props,l=e?t._('Messages. You have unread messages.', 'messages.button.badge.messages', 'Accessibility label for messages button with pending unread messages.'):t._('Messages', 'messages.button', 'Accessibility label for messages button with no pending unread messages.'),a=t._('Messages', 'navbar.conversationsButton.tooltip', 'Tooltip text for icon button to show conversations inbox'),r="notifications-button";return(0,z.jsxs)(i.xu,{ref:this.setButtonRef,position:"relative",children:[o?(0,z.jsx)(x.Z,{accessibilityControls:b.rC,accessibilityLabel:l,badgeCount:e,dataTestId:r,onClick:this.handleButtonClick,selected:n,tooltipText:a,verticalNavIconName:"messages"}):(0,z.jsx)(i.u,{accessibilityLabel:"",text:a,zIndex:new i.H3([new i.Ry(P.fe)]),children:(0,z.jsx)(i.xu,{"data-test-id":r,children:(0,z.jsx)(y.Z,{accessibilityLabel:l,badgeCount:e,icon:"speech-ellipsis",onClick:this.handleButtonClick,selected:n})})}),s&&(0,z.jsx)(S,{anchor:this.anchor,conversation:s})]})}}function I(e){let t=(0,u.ZP)(),n=(0,r.Z)(),i=(0,o.TH)(),{isAuth:g,isLimitedLogin:b}=(0,c.Z)(),{enabled:y}=(0,k.Z)();(0,p.Z)(()=>{g&&!b&&l.Z.create("ConversationsResource",{field_set_key:"default"}).callGet()});let{conversations:{conversationsUnseenCount:x,newsHubCount:P,showConversationsDropdown:A},dropdownClose:w,dropdownOpen:C}=(0,m.Z)(),{checkExperiment:S}=(0,_.ru)(),{setInboxButton:T}=(0,v.Z)(),I=(0,f.Z)().find(e=>e.unread>0),Z=(0,o.k6)(),M=(0,d.C$)(Z.location),E=h.ZP.getItem(a.eQ),R=E&&Date.now()-Number(E)<j.VC,B=M&&!A&&!R&&I&&S("sg_dweb_app_start_msg_notif").anyEnabled,D=(0,s.useRef)(!0);return(0,s.useEffect)(()=>{D.current||e.onPanelChange?.(A),D.current=!1},[A]),(0,z.jsx)(L,{...e,closeConversationsDropdown:w,conversationsUnseenCount:x,conversationWithUnreadMesage:B?I:null,i18n:t,isVerticalNavEnabled:y,location:i,newsHubCount:P,openConversationsDropdown:C,requireAuth:n,setInboxButton:T,showPanel:A})}var Z=n(650088);function M({onClick:e,onPanelChange:t}){return(0,z.jsx)(Z.Z,{icon:"speech-ellipsis",children:({onClearBadges:n})=>(0,z.jsx)(I,{onClearBadges:n,onClick:e,onPanelChange:t})})}},650088:function(e,t,n){n.d(t,{Z:()=>y});var s,o=n(667294),i=n(20256),l=n(167912),a=n(575108),r=n(949044),c=n(886981),u=n(974705),d=n(199593),_=n(543188),h=n(785893);let p=(0,r.Z)(u.Z);class m extends o.Component{constructor(...e){var t,n,s;super(...e),t="handleClearBadges",n=e=>{e===_.S.NEWS_HUB?(a.Z.create("NewsHubBadgeResource").callDelete({showError:!1}),this.props.updateNewsHubCount(0)):(this.props.conversationBadgeCall(),this.props.updateUnreadCount(0))},(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:s+"")in this?Object.defineProperty(this,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[t]=n}shouldComponentUpdate(e){if(!this.props.badgeResource||!e.badgeResource)return!1;let t=this.props.badgeResource.data,n=e.badgeResource.data;return t&&n?!!["conversations_unseen_count","news_hub_count"].map(e=>t[e]!==n[e]).filter(Boolean).length:!t&&!!n}componentDidUpdate(){let{badgeResource:e,updateNewsHubCount:t,updateUnreadCount:n}=this.props;if(!(e&&e.data))return;let s=p(e.data);n(s.conversationsUnseenCount),t(s.newsHubCount)}render(){let{children:e}=this.props;return e({onClearBadges:this.handleClearBadges})}}function f({conversationBadgeCall:e,children:t}){let n=(0,c.Z)({name:"NewsHubBadgeResource",noCache:!0}),{updateNewsHubCount:s,updateUnreadCount:o}=(0,d.Z)();return(0,h.jsx)(m,{badgeResource:n,conversationBadgeCall:e,updateNewsHubCount:s,updateUnreadCount:o,children:t})}function g({children:e}){return(0,h.jsx)(f,{conversationBadgeCall:(()=>{let e=void 0!==s?s:s=n(516829),[t]=(0,l.useMutation)(e);return async()=>await new Promise((e,n)=>{t({variables:{},onCompleted:(t,s)=>{s&&n(s[0]),e(t)},onError:e=>n(e)})})})(),children:e})}var b=n(244529),v=n(631395);function y({icon:e,children:t}){let[n,s]=(0,o.useState)(!1),{enabled:l}=(0,b.Z)();return((0,o.useEffect)(()=>{s(!0)},[]),n)?(0,h.jsx)(g,{children:t}):(0,h.jsx)(i.xu,{paddingX:1,children:(0,h.jsx)(i.kC,{alignItems:"center",height:48,justifyContent:"center",width:48,children:l?(0,h.jsx)(v.QV,{iconName:"speech-ellipsis"===e?"messages":"notifications",selected:!1}):(0,h.jsx)(i.JO,{accessibilityLabel:"",color:"subtle",icon:e,size:24})})})}},502588:function(e,t,n){n.d(t,{VC:()=>b,XZ:()=>g,ZP:()=>v});var s=n(616550),o=n(20256),i=n(575108),l=n(111330),a=n(744862),r=n(475498),c=n(821342),u=n(525839),d=n(506662),_=n(753143),h=n(87853),p=n(647709),m=n(341742),f=n(785893);let g=2e3,b=864e5;function v(){let e=(0,u.ZP)(),t=(0,c.Z)(),{isAuth:n,isLimitedLogin:v}=t,y=t.isAuth?t?.avatar_color_index:void 0,{showToast:x}=(0,h.dI)(),P=(0,s.k6)(),A=(0,d.C$)(P.location),w=(0,p.HG)();return(0,m.Z)(()=>{let t=async()=>{let t=i.Z.create("ConversationsResource",{field_set_key:"default"}),n=(await t.callGet()).resource_response.data.find(e=>e.unread>0),s=_.ZP.getItem(l.eQ),c=s&&Date.now()-Number(s)<b,u=n&&A&&!c&&n.last_message,d=_.ZP.getItem(l.Td);if(u&&u.id!==d){_.ZP.setItem(l.Td,u.id),_.ZP.setItem(l.eQ,Date.now());let{sender:t}=u,s=t.first_name||t.username||"",i=u.pin?e._('sent you a Pin', 'navbar.messageNotifications.text', 'Message notification text'):e._('sent you a message', 'navbar.messageNotifications.text', 'Message notification text'),c=(0,f.jsxs)(o.xv,{inline:!0,children:[(0,f.jsxs)(o.xv,{inline:!0,weight:"bold",children:[s," "]}),i]});setTimeout(()=>{x(({hideToast:o})=>(0,f.jsx)(r.Z,{duration:5e3,onHide:o,primaryAction:{accessibilityLabel:e._('Reply to the message', 'NotificationToast.replyButton.accessibilityLabel', 'Button on notification toast for users to reply to the message'),label:e._('Reply', 'NotificationToast.replyButton.buttonText', 'Button on notification toast for users to reply to the message'),onClick:()=>{P.push(`/conversation/${n.id}`),o()}},text:c,thumbnail:{avatar:(0,f.jsx)(a.qE,{color:y,name:s,size:"sm",src:t.image_large_url||""})}}))},g)}};!n||v||w||t()}),null}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/43425-53a113a25812e625.mjs.map