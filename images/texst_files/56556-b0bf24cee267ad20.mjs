(self.modernJsonp=self.modernJsonp||[]).push([["56556"],{537685:function(e,t,n){n.d(t,{Z:()=>y});var i=n(667294),r=n(578341),o=n(901472),s=n(515085),l=n(240402),a=n(15667),u=n(707353),_=n(581722),c=n(821342);let d=()=>{let e=(0,c.Z)(),t=(0,_.v9)(({loggedOutUserInfo:e})=>e?.userInfo);return e.isAuth&&e.isLimitedLogin?{type:"LIMITED_LOGIN",info:{connectedToFacebook:!!((e.socialNetwork||{}).facebook||{}).connected,connectedToGoogle:!!((e.socialNetwork||{}).gplus||{}).connected,email:e.email,firstName:e.firstName,hasPassword:!!e.hasPassword,imageUrl:e.imageMediumUrl,gplusUrl:((e.socialNetwork||{}).gplus||{}).url}}:{type:e.isAuth?"AUTH":"UNAUTH",info:t&&t.email&&t.first_name?{connectedToFacebook:!!t.connected_to_facebook,connectedToGoogle:!!t.connected_to_google,email:t.email,firstName:t.first_name,hasPassword:!!t.has_password,imageUrl:t.medium_image_url??null}:null}};var h=n(848387),g=n(521009),m=n(525839),v=n(647709),E=n(732347),p=n(703914),f=n(785893);function w({children:e}){let t=function(){let e=(()=>{let[e,t]=(0,i.useState)(!1),n=(0,g.Z)();return(0,p.UE)(()=>t(!0)),(0,p.NN)(n),{visible:e,setVisible:t}})();return{loginForMore:e,limitedLoginModalSubheader:(()=>{let e=(0,m.ZP)(),t=(0,v.HG)(),n=(0,g.Z)(),r=t?(0,E.hr)(e):(0,E.Wh)(e),[o,s]=(0,i.useState)(r);return(0,p.cZ)(e=>s(e??r)),(0,p.NN)(n),{text:o,setText:s}})(),limitedLoginModalNextLocation:(()=>{let[e,t]=(0,i.useState)("");return{route:e,setRoute:t}})(),viewer:d()}}();return(0,f.jsx)(h.o,{value:t,children:e})}function b({children:e}){let t=(0,a.B)(),n=d(),l=(()=>{let e=(0,r.Z)();return(0,i.useCallback)((t,n)=>e(t,{loggingOptions:n}),[e])})(),u=(0,i.useMemo)(()=>({getDeviceAppTypeString:()=>(0,s.Z)(t),register:l,viewer:n}),[t,n,l]);return(0,f.jsx)(o.I7,{value:u,children:e})}let y=({children:e})=>(0,f.jsx)(u.iE,{children:(0,f.jsx)(w,{children:(0,f.jsx)(b,{children:(0,f.jsx)(l.Z,{children:e})})})})},790989:function(e,t,n){n.d(t,{Z:()=>z});var i=n(667294),r=n(581722),o=n(980787),s=n(575108),l=n(918920);let a=[9,3];var u=n(641527),_=n(973160),c=n(816358),d=n(809295),h=n(121793),g=n(603316);function m(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let v=null,E=(0,u.ZP)();class p{constructor(e){var t;let n;m(this,"_logTimeoutLong",null),m(this,"_logTimeoutShort",null),m(this,"_clickthroughStartEvent",null),m(this,"_utcDate",new Date),m(this,"_collectionClickthroughEndEvent",null),this._webFastFlushEventsEnabled=e.webFastFlushEventsEnabled,this._rightClickVisibilityChangeEnabled=e.rightClickVisibilityChangeEnabled;let i=()=>{let{activeElement:e}=document;if(e&&e.id===l.ZP.VIDEO_IFRAME_ID&&e)return void setTimeout(()=>e.blur(),0);c.Z.pause(d.LU),this.flushEvents()},r=(t=()=>i(),n=!1,(...e)=>{n||(n=!0,t(...e))}),o=()=>{c.Z.resume(d.LU)};{E&&E.initiateIndexDBCache&&E.initiateIndexDBCache(),window.addEventListener("beforeunload",r),window.addEventListener("pagehide",r),window.addEventListener("focus",o),window.addEventListener("blur",()=>i());let{hidden:e,visibilityChange:t}=(0,_.s)(),n=()=>{document[e]?i():(this.flushEvents(),o())};t&&window.addEventListener(t,n,!1)}}setTimeoutToFlushEvents(e){!this._logTimeoutShort&&(!this._webFastFlushEventsEnabled&&e.view_type&&a.includes(e.view_type)&&13===e.event_type||this._webFastFlushEventsEnabled&&(e=>{switch(e.event_type){case 13:return!!e.view_type&&a.includes(e.view_type);case 4703:if(3===e.view_type&&85===e.component||186===e.view_type||11===e.view_type)return!0;return!1;case 82:case 8948:return!0;default:return!1}})(e))?this._logTimeoutShort=setTimeout(this.flushEvents.bind(this,!1,!0),300):this._logTimeoutLong||(this._logTimeoutLong=setTimeout(this.flushEvents.bind(this),1e4))}addEvent(e,t){let n=e.event_type;if(null==n||!(0,u.cA)(e))return;this.setTimeoutToFlushEvents(e);let i=(0,u.li)(e,t);i.appState=document&&document.hasFocus()?0:void 0;let r=u.Ch[n];if(r&&1){if(r.startsWith("storyImpression")){i.event_data?.storyImpressions&&(i.event_data.storyImpression=i.event_data.storyImpressions,delete i.event_data.storyImpressions),E.logImpression((0,u.a)(i,"storyImpression"));return}(0,u.nc)(i,r).forEach(E.logImpression);return}if((0,g.nP)("webapp.contextLogger.impressionType",{sampleRate:.01,tags:{event_type:n}}),E.logContextEvent(i),12===n){E.logContextEvent({...i,event_type:7946}),this._clickthroughStartEvent={...i,time:1e6*Date.now()},v?.storeClickthroughProperties({view_type:i.view_type,view_parameter:i.view_parameter,component:i.component,element:i.element,object_id_str:i.object_id_str,view_data:i.view_data,aux_data:i.aux_data,clientTrackingParams:i.clientTrackingParams});let{aux_data:e}=i||{};!this._rightClickVisibilityChangeEnabled&&e&&"rightClick"===e.clickthrough_type&&v?.startOffsiteRightClickTimedPair()}if(7761===n||7762===n){let e=7761===n?7777:7843;this._collectionClickthroughEndEvent={...i,event_type:e}}if(4100===n&&this._collectionClickthroughEndEvent){let e=this._collectionClickthroughEndEvent;this._collectionClickthroughEndEvent=null;let t={...e,object_id_str:i.object_id_str,duration_ns:i.duration_ns};E.logContextEvent(t)}}flushEvents(){let e=E.getContextEvents?.();e&&e.length&&E.flushContextEvents(),this._reset()}_reset(){this._resetShortTimerEvents(),this._resetLongTimerEvents()}_resetShortTimerEvents(){E.resetEventsBuffer?.(),clearTimeout(this._logTimeoutShort),this._logTimeoutShort=null}_resetLongTimerEvents(){E.resetEventsBuffer?.(),clearTimeout(this._logTimeoutLong),this._logTimeoutLong=null}}var f=n(839626),w=n(588056),b=n(821342),y=n(616550),C=n(573631),T=n(503863),S=n(785893);function k({children:e}){let t=(0,y.TH)(),n=(0,C.b)(),r=(0,i.useMemo)(()=>{if(n){let e=new URLSearchParams(t.search);if(!e.get("url")){let t=e.get("tracking_id")||e.get("e_t"),n=e.get("utm_campaign"),i=e.get("utm_source");if(t&&n&&i)return JSON.stringify({message_type:n,tracking_id:t,utm_source:i})}}},[n,t.search]),o=(0,i.useMemo)(()=>({landingContext:r}),[r]);return(0,S.jsx)(T.T,{value:o,children:e})}var x=n(274320),I=n(15667),P=n(440568),R=n(72918),Z=n(82347),L=n(707079),N=n(998212),j=n(341742);function A({children:e}){let t=(0,o.u)(),n=(0,h.w)({contextLogger:t});return(0,j.Z)(()=>{document.hasFocus()&&n.registerApp(),n.addEventListeners()}),(0,S.jsx)(N.$,{value:n,children:e})}var F=n(572572),O=n(420817),D=n(975740),M=n(169053),U=n(793698);function H({children:e}){let t=(0,U.dM)(),n=Object.keys(t).find(e=>void 0!==t[e].login_state),r=n?t[n]:void 0,o=(0,i.useMemo)(()=>(0,F.Z)(r),[r]),s=(0,I.gf)(),{isAuth:l}=o,{isAuthenticated:a}=(0,I.B)();return(0,i.useEffect)(()=>{a!==l&&s({isAuthenticated:l})},[a,l]),(0,S.jsx)(b.$,{value:o,children:e})}function B({children:e}){let t=(0,x.FJ)(),n=(0,M.JC)(),r=(0,i.useRef)(e=>n[e]);(0,i.useEffect)(()=>{r.current=e=>n[e]},[n]);let l=(0,i.useMemo)(()=>(function({getReduxPin:e,webFastFlushEventsEnabled:t=!1,rightClickVisibilityChangeEnabled:n=!1}){let i=new p({webFastFlushEventsEnabled:t,rightClickVisibilityChangeEnabled:n});window.addEventListener&&window.addEventListener("focus",()=>{if(!i._clickthroughStartEvent)return;let e=i._clickthroughStartEvent;i._clickthroughStartEvent=null;let t={...e,event_type:4100,duration_ns:(0,_.Z)()-e.time};i.addEvent(t)}),E._getIndexDBInstance?.()&&E.syncCachedEndEvents?.();let r={flushContextEvents:()=>i.flushEvents(),logContextEvent:t=>{if(null===t.event_type||void 0===t.event_type)return;let n=t.clientTrackingParams||(t=>{try{let n=t?e(t):void 0;return n?`${n.tracking_params??""}~0`:void 0}catch{return}})(t.object_id_str);i.addEvent({...t,clientTrackingParams:n},r.injectSetViewContextDataFromHook)},logImpression:({auxData:e,component:t,eventData:n,eventType:o,impressionType:s,objectIdStr:l,viewData:a,viewParameter:u,viewType:_,element:c})=>{null!=o&&i.addEvent({event_type:o,event_data:{[s]:n},component:t,object_id_str:l,aux_data:e,view_type:_,view_parameter:u,view_data:a,element:c},r.injectSetViewContextDataFromHook)}};return v=(0,h.w)({contextLogger:r}),s.Z.contextLogger=r,r})({getReduxPin:e=>r.current(e),webFastFlushEventsEnabled:t.checkExperiment("cli_fast_flush_events").anyEnabled,rightClickVisibilityChangeEnabled:t.checkExperiment("web_metrics_right_click_visibility_change").anyEnabled}),[t]);return(0,S.jsx)(o.B,{value:l,children:e})}function z(e){let{children:t,reduxStore:n,serverState:o,...l}=e,a=(0,i.useRef)(!1),u=(0,i.useMemo)(()=>new L.ZP,[]);return a.current||(!function(e,t){if(!window)return;let n={},i=(e,i)=>{let r=decodeURIComponent(i),o=new Promise(t=>{n[e]||(n[e]={}),n[e][r]=t});t.add(e,r,o)},r=t=>{let{normalizedResponse:i,options:r,resource:o,response:l,schema:a}=(0,Z.Z)(t);l.resource_response.error?408!==l.resource_response.error.http_status&&e.dispatch((0,R.Tl)(o,r,l.resource_response.error)):(s.Z.fetchCompleteCallback&&s.Z.fetchCompleteCallback({resource:o,options:r,response:l,normalizedResponse:i,refresh:!1,resourceSchema:a}),e.dispatch((0,R.Sr)(o,r,l,i,!1,a))),n[o]?.[(0,P.Z)(r)]?.()};window.__PWS_RESOURCE_PENDING_FETCH_HANDLER__=i,window.__PWS_RESOURCE_SSR_HANDLER__=r;let o=Object.keys(window.__PWS_RESOURCE_PENDING_BEFORE_INIT__);o.length&&(o.forEach(e=>{window.__PWS_RESOURCE_PENDING_BEFORE_INIT__[e].forEach(t=>{i(e,t)})}),window.__PWS_RESOURCE_PENDING_BEFORE_INIT__={}),window.__PWS_RESOURCE_DATA_BEFORE_INIT__.length&&(window.__PWS_RESOURCE_DATA_BEFORE_INIT__.forEach(r),window.__PWS_RESOURCE_DATA_BEFORE_INIT__=[])}(n,u),a.current=!0),(0,S.jsx)(O.Z,{...l,children:(0,S.jsx)(L.F_,{value:u,children:(0,S.jsx)(r.zt,{store:n,children:(0,S.jsx)(D.fJ,{children:(0,S.jsx)(M._S,{children:(0,S.jsx)(U.kY,{children:(0,S.jsx)(H,{children:(0,S.jsx)(B,{children:(0,S.jsx)(f.FH,{children:(0,S.jsx)(k,{children:(0,S.jsx)(A,{children:(0,S.jsx)(w.GF,{children:t})})})})})})})})})})})})}},901472:function(e,t,n){n.d(t,{Cw:()=>s,I7:()=>a,Py:()=>u,c4:()=>l});var i=n(667294),r=n(729434);let o=(0,i.createContext)(null),s=()=>(0,i.useContext)(o),l=o,{Provider:a,get:u}=(0,r.Z)("DesktopCoreLogin")},578341:function(e,t,n){n.d(t,{Z:()=>I});var i=n(667294),r=n(255581),o=n(575108),s=n(111330),l=n(296086),a=n(521009),u=n(464332),_=n(981636),c=n(638957),d=n(2420),h=n(947667),g=n(154796),m=n(450978),v=n(15667),E=n(650160),p=n(753143),f=n(941404),w=n(79077),b=n(378888),y=n(510928),C=n(707353),T=n(547362),S=n(831373),k=n(603316);let x=0;function I(){let e=(0,g.Z)(),t=(0,a.Z)(),n=(0,v.B)(),I=(0,w.Z)(),{isRequirementEnabled:P}=(0,C.yp)();return(0,i.useCallback)((i,{loggingOptions:{signupContext:a,signupAttemptContextEvent:g}})=>{let v=e=>{t({...g,event_type:e,aux_data:{...g.aux_data,upsell_reason:g.aux_data?.upsell_reason||(0,p.M0)().getItem(s.bg)||null,upsell_view_count:(0,p.M0)().getItem(s.w0)||0}}),7487===e&&(0,p.M0)().setItem(s.w0,0)},w=({isRetrying:e})=>{let g={...i},C=(0,S.t_)(),R=(0,T.O)(),Z=window?.location?.search??null,L=(0,b.mB)(Z).utm_campaign;C&&(g={...g,visited_pages:C}),R&&(g={...g,referrer:R}),L&&(g={...g,utm_campaign:L});let N=(0,p.M0)().getItem(s.e9)||[];if(C)g={...g,visited_pages:C};else if(N){let e=[];for(let t of N)t.is_shared_pin&&e.push({ts:t.ts,path:t.path,first_pin_image_signature:t.image_signature,is_shared:!0});e&&(g={...g,visited_pages:JSON.stringify(e.concat(JSON.parse(C||"[]")))})}let j=(0,c.Z)({isComplianceFeatureRequired:P,viewType:10});j.length>0&&(g={...g,privacy_disclaimer_acknowledge:j}),g={...g,user_behavior_data:JSON.stringify({})};let A=(0,h.yV)(g);return e||(v(7537),I({action:"signup",event:"attempt",trigger:a?.trigger,type:A})),(0,k.nP)("webapp.debug_signup_type.core_register",{sampleRate:1,tags:{CHECK_TYPE:(0,h.Eh)(g,"CHECK_TYPE")??"none",CHECK_EXISTS:(0,h.Eh)(g,"DEPRECATED_CHECK_EXISTS"),CHECK_TRUTHY:(0,h.Eh)(g,"DEPRECATED_CHECK_TRUTHY")}}),o.Z.create("UserRegisterResource",g).callCreate().then(()=>(()=>{let{country:e,countryFromHostName:i,countryFromIp:o,regionFromIp:c}=n;(0,E.Z)("signup"),u.zN(r.Mq.name),u.zN(r.x2.name),(0,l.Z)(),u.t8(r.Xh,"1"),(0,_.Z)(!0),(0,p.M0)().removeItem(s._b);let d=a?.container||"container_unknown";(0,f.My)(`signup.container.${d}`);let h=a?.signupSource||"signupSource_unknown";(0,f.My)(`signup.source.${h}`),t({event_type:"home_page"===d?1750:1754}),(0,f.My)(`signup_referrer_module.${String((0,y.Z)().referrer||"unknown")}`),(0,m.ko)({country:e,countryFromHostName:i,countryFromIp:o,regionFromIp:c,deviceType:"Desktop",eventCategory:"NewUsers"}),v(7487),I({action:"signup",event:"success",referrer:(()=>{let e=document.referrer;return e?e.indexOf("/t.co/")>-1?"twitter":e.indexOf("google.")>-1?"google":e.indexOf("bing.")>-1?"bing":e.indexOf("facebook.")>-1?"facebook":"other":"direct"})(),trigger:a?.trigger,type:A})})(),e=>(e=>{if(e.api_error_code===d.tz&&((0,f.My)("multi_step_set_age_restrict_cookie"),u.t8(r.It,"1",(0,u.kZ)(r.It))),(!e.api_error_code||[d.dO,d.cZ].includes(e.api_error_code))&&x<3)return(0,f.My)(`unauth_web.signup_retry_error.${String(e.api_error_code)}.${String(a?.container)}`),x+=1,w({isRetrying:!0});throw v(7488),I({action:"signup",event:"fail",trigger:a?.trigger,type:A}),e})(e))};return e(),w({isRetrying:!1})},[e,P,t,n,I])}},515085:function(e,t,n){n.d(t,{Z:()=>i});function i(e){let t=e.userAgent.isMobile?"mobile":"desktop";return`${t}.${e.country}.${e.userAgent.platform}.${e.userAgent.browserName}`.replace(/ /g,"_")}},638957:function(e,t,n){n.d(t,{Z:()=>i});let i=({isComplianceFeatureRequired:e,viewType:t})=>{let n=[];return e({requirementEnum:0,viewType:t})&&n.push("fdbr"),n.join(",")}},975740:function(e,t,n){n.d(t,{dL:()=>l,fJ:()=>u,gC:()=>a});var i=n(581722),r=n(729434),o=n(785893);let{Provider:s,get:l}=(0,r.Z)("Boards");function a(){let e=l();return t=>e[t]}function u({children:e}){let t=(0,i.v9)(({boards:e})=>e,i.wU);return(0,o.jsx)(s,{value:t,children:e})}},732347:function(e,t,n){n.d(t,{N4:()=>o,Wh:()=>i,hr:()=>r});let i=e=>e._('Log in to continue', 'limitedLogin.modalHeader.default', 'Default title on mobile web limited login modal'),r=e=>e._('You\'re almost there! Log in to access all of Pinterest', 'loginModal.limitedLogin.subheader', 'Subheader text on personalized login modal/flyout to remind users to log in'),o=({i18n:e,toFollow:t})=>t?e._('Log in to follow', 'limitedLogin.modalHeader.follow', 'Title on mobile web limited login modal to prompt users to login to follow a user or board.'):e._('Log in to unfollow', 'limitedLogin.modalHeader.unfollow', 'Title on mobile web limited login modal to prompt users to login to unfollow a user or board.')}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/56556-b0bf24cee267ad20.mjs.map