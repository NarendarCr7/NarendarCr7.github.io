(self.modernJsonp=self.modernJsonp||[]).push([["93961"],{827446:function(e,t,i){var n={"./HI.tsx":["791483",9,"36023"],"./KR":["244758",9,"51516"],"./RO.tsx":["303031",9,"65297"],"./ENUK.tsx":["1061",9,"45921"],"./TL.tsx":["939408",9,"8637"],"./HU":["640461",9,"74865"],"./UA.tsx":["490488",9,"26589"],"./ID.tsx":["50800",9,"25965"],"./ID":["50800",9,"25965"],"./NL":["15053",9,"43672"],"./ZHCN.tsx":["747666",9,"98159"],"./ZHCN":["747666",9,"98159"],"./SV":["289025",9,"61592"],"./ESMX.tsx":["668595",9,"31292"],"./TL":["939408",9,"8637"],"./PL.tsx":["687971",9,"72201"],"./TH.tsx":["270997",9,"58481"],"./HI":["791483",9,"36023"],"./types.ts":["705261",7,"45982"],"./IT":["613882",9,"1710"],"./SK":["670496",9,"29161"],"./RU":["428140",9,"52615"],"./SK.tsx":["670496",9,"29161"],"./ZHTW":["926725",9,"84372"],"./ESMX":["668595",9,"31292"],"./DA.tsx":["358925",9,"16844"],"./NL.tsx":["15053",9,"43672"],"./JP.tsx":["812101",9,"34530"],"./KR.tsx":["244758",9,"51516"],"./FR":["442278",9,"40329"],"./TR.tsx":["808592",9,"56638"],"./FR.tsx":["442278",9,"40329"],"./index.tsx":["217158",9],"./NO":["768548",9,"40463"],"./DE.tsx":["672702",9,"62874"],"./PTPT":["891410",9,"5591"],"./MS.tsx":["87108",9,"9914"],"./ESAR":["752760",9,"38933"],"./localeToFilename":["189134",9],"./HU.tsx":["640461",9,"74865"],"./RO":["303031",9,"65297"],"./PL":["687971",9,"72201"],"./TR":["808592",9,"56638"],"./DE":["672702",9,"62874"],"./ESES":["915696",9,"52317"],"./ESES.tsx":["915696",9,"52317"],"./VT.tsx":["801676",9,"90628"],"./TH":["270997",9,"58481"],"./DA":["358925",9,"16844"],"./PTBR.tsx":["804706",9,"11329"],"./ZHTW.tsx":["926725",9,"84372"],"./":["217158",9],"./ENUS":["350228",9,"46306"],"./JP":["812101",9,"34530"],"./PTBR":["804706",9,"11329"],"./CZ":["719690",9,"30503"],"./NO.tsx":["768548",9,"40463"],"./PTPT.tsx":["891410",9,"5591"],"./CZ.tsx":["719690",9,"30503"],"./SV.tsx":["289025",9,"61592"],"./UA":["490488",9,"26589"],"./ESAR.tsx":["752760",9,"38933"],"./VT":["801676",9,"90628"],"./index":["217158",9],"./GR.tsx":["744598",9,"92550"],"./IT.tsx":["613882",9,"1710"],"./localeToFilename.ts":["189134",9],"./ENUS.tsx":["350228",9,"46306"],"./ENUK":["1061",9,"45921"],"./FI":["856534",9,"72884"],"./FI.tsx":["856534",9,"72884"],"./types":["705261",7,"45982"],"./GR":["744598",9,"92550"],"./RU.tsx":["428140",9,"52615"],"./MS":["87108",9,"9914"]};function s(e){if(!i.o(n,e))return Promise.resolve().then(function(){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=n[e],s=t[0];return Promise.all(t.slice(2).map(i.e)).then(function(){return i.t(s,16|t[1])})}s.keys=()=>Object.keys(n),s.id=827446,e.exports=s},217158:function(e,t,i){i.r(t),i.d(t,{default:()=>d});var n=i(667294),s=i(20256),r=i(525839),o=i(15667),a=i(782259),l=i(189134),c=i(785893);function d({height:e,onCtaDidLoad:t,width:d}){let h=(0,r.ZP)(),[u,g]=(0,n.useState)(null),{locale:m}=(0,o.B)(),p=(0,l.default)(m);(0,n.useEffect)(()=>{p&&"none"!==p&&g((0,n.lazy)(()=>i(827446)(`./${p}`)))},[p]),(0,n.useEffect)(()=>{u&&t()},[u]);let x=h._('Open Pinterest app, then go to the search tab, then tap the camera icon located in the search bar to scan the Pincode', 'PincodeCTA.instruction', 'Text informing users how to use Pincodes \u2014 may be displayed or used as accessibility label'),f=(0,c.jsx)(s.xv,{align:"center",children:x});return"none"===p?f:u?(0,c.jsx)(a.Z,{fallback:f,children:(0,c.jsx)(u,{height:e,title:x,width:d})}):(0,c.jsx)(s.xH,{accessibilityLabel:h._('Loading Pincode Call to Action', 'PincodeCTA.loading', 'Accessibility label for loading spinner for the Pincode call-to-action'),show:!0})}},189134:function(e,t,i){function n(e){switch(e.toUpperCase()){case"CS-CZ":return"CZ";case"DA-DK":return"DA";case"DE":return"DE";case"EL-GR":return"GR";case"EN-GB":return"ENUK";case"EN-US":return"ENUS";case"ES-ES":return"ESES";case"ES-MX":case"ES-419":return"ESMX";case"ES-AR":return"ESAR";case"FI-FI":return"FI";case"FR":return"FR";case"HI-IN":return"HI";case"HU-HU":return"HU";case"ID-ID":return"ID";case"IT":return"IT";case"JA":return"JP";case"KO-KR":return"KR";case"MS-MY":return"MS";case"NL":return"NL";case"NB-NO":return"NO";case"PL-PL":return"PL";case"PT-BR":return"PTBR";case"PT-PT":return"PTPT";case"RO-RO":return"RO";case"RU-RU":return"RU";case"SK-SK":return"SK";case"SV-SE":return"SV";case"TH-TH":return"TH";case"TL-PH":return"TL";case"TR":return"TR";case"UK-UA":return"UA";case"VI-VN":return"VT";case"ZH-CN":return"ZHCN";case"ZH-TW":return"ZHTW";default:return"none"}}i.r(t),i.d(t,{default:()=>n})},610256:function(e,t,i){i.d(t,{Z:()=>S});var n,s,r=i(667294),o=i(20256),a=i(980787),l=i(525839);function c(e){return new Promise((t,i)=>{let n=new XMLHttpRequest;n.ontimeout=i,n.onreadystatechange=()=>{if(4!==n.readyState)return;if(200!==n.status)return void i();let e=new FileReader;e.onloadend=()=>{let{result:n}=e;"string"==typeof n?t(n.split(/,/)[1]):i()},e.readAsDataURL(n.response)},n.open("GET",e,!0),n.timeout=3e4,n.responseType="blob",n.send()})}function d(e,t){return new Promise((i,n)=>{let s=document.createElement("div");s.innerHTML=e.innerHTML,(function e(t,i){if(!(t instanceof Element))return Promise.resolve(t);if(t instanceof window.SVGImageElement){let e=t.href.baseVal;if(e.startsWith("data:"))return Promise.resolve();let n=i?i(e):e;return Promise.resolve(n).then(c).then(e=>`data:${function(e){let t=e.match(/\.([^\.\/]*?)$/);switch(t&&t[1]){case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"gif":return"image/gif";default:return""}}(n)};base64,${e}`).then(e=>new Promise((i,n)=>{t.onerror=n,t.href.baseVal=e,window.requestAnimationFrame(i)}))}return Promise.all(Array.from(t.childNodes).map(t=>e(t,i)))})(s,t).then(()=>{let t=new Image;t.onload=()=>{window.requestAnimationFrame(()=>i(t))},t.onerror=n;let r=s&&s.querySelector("svg");r&&(/^[0-9]+$/.test(r.getAttribute("width")||"")||r.setAttribute("width",`${e.scrollWidth}`),/^[0-9]+$/.test(r.getAttribute("height")||"")||r.setAttribute("height",`${e.scrollHeight}`));let o=s.innerHTML.replace(/(xmlns="[^"]+"[^>]*)\ xmlns="[^"]+"/,"$1");t.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(o.trim())}`})})}var h=i(217158),u=i(785893);function g({getThumbnailImageSrcSet:e,images:t,onTouch:i}){let n=(0,l.ZP)();return(0,u.jsx)(o.xu,{display:"flex",justifyContent:"start",maxHeight:328,overflow:"auto",padding:1,wrap:!0,children:["logo"].concat(t).map((t,s)=>(0,u.jsx)(o.xu,{padding:1,children:(0,u.jsx)(o.st,{children:(0,u.jsx)(o.iP,{fullWidth:!1,onTap:()=>i("logo"===t?"logo":s-1),rounding:2,children:(0,u.jsx)(o.zd,{height:85,rounding:"circle",width:85,children:"logo"===t?(0,u.jsx)(o.JO,{accessibilityLabel:"Pinterest logo",color:"brandPrimary",icon:"pinterest",size:85}):t.url&&(0,u.jsx)(o.Ee,{alt:n._('Pincode Hero Image', 'accessibility label for the Pincode hero image', 'accessibility label for the Pincode hero image'),color:t.dominant_color||"#b5b5b5",fit:"cover",naturalHeight:t.height??1,naturalWidth:t.width??1,src:t.url,srcSet:e&&e(t.url??"")})})})})},"logo"===t?t:t.url))})}var m=i(886981);let p=i(830811).x_d,x=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(`
  <svg xmlns="http://www.w3.org/2000/svg" width="222" height="${n||222}" x="0" y="${s||0}" viewBox="0 0 222 222">
    <path d="M0 111c0 47 29.3 87.2 70.6 103.4-1-8.8-2-22.3.3-32l13-55s-3.4-6.7-3.4-16.5c0-15.6 9-27 20-27 9.6 0 14.2 7 14.2 15.5 0 9.6-6 23.8-9.2 37-2.7 11 5.5 20 16.4 20 19.7 0 35-20.7 35-50.8 0-26.5-19.2-45-46.5-45-31.5 0-50 23.6-50 48 0 9.6 3.6 19.8 8.2 25.4 1 1.2 1 2 .7 3.3l-3 12.5c-.5 2-1.6 2.5-3.8 1.5-13.8-6.4-22.5-26.7-22.5-43 0-35 25.6-67 73.5-67 38.5 0 68.4 27.3 68.4 64 0 38.2-24.2 69-57.7 69-11.3 0-21.8-5.8-25.4-12.7L92 188c-2.6 9.6-9.3 21.7-14 29 10.5 3.3 21.6 5 33 5 61.3 0 111-49.7 111-111S172.3 0 111 0 0 49.7 0 111z" fill="${p}" fill-rule="evenodd" />
  </svg>`.trim())}`;function f(e,t,i){return`
    <image id="image"
      x="${100+300*("right"===t)}"
      y="${100+300*("bottom"===i)}"
      width="${600/("row"===t?1:2)}"
      height="${600/("column"===i?1:2)}"
      xmlns:xlink="http://www.w3.org/1999/xlink"
      xlink:href="${e}"
      preserveAspectRatio="xMidYMid slice"
    />`}class _ extends r.Component{constructor(...e){var t,i,n;super(...e),t="handleFetchChange",i=()=>{let{pincodeImageResource:e,onFetchingChange:t}=this.props;t(e.isFetching)},(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in this?Object.defineProperty(this,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[t]=i}componentDidMount(){let{pincodeImageResource:e}=this.props;e.isFetching||this.handleFetchChange()}componentDidUpdate(e){this.props.pincodeImageResource.isFetching!==e.pincodeImageResource.isFetching&&this.handleFetchChange()}render(){let{className:e,imageUrls:t,size:i,pincodeImageResource:{data:n,isLoaded:s}}=this.props;return(0,u.jsxs)(o.kC,{alignItems:"center",height:i,justifyContent:"center",width:i,children:[s&&!!n&&(0,u.jsx)("div",{className:e,dangerouslySetInnerHTML:{__html:function(e,t){let i=function(e){switch(e.length){case 0:case 1:return;case 2:return[f(e[0],"left","column"),f(e[1],"right","column")].join("");case 3:return[f(e[0],"left","column"),f(e[1],"right","top"),f(e[2],"right","bottom")].join("");default:return[f(e[0],"left","top"),f(e[1],"right","top"),f(e[2],"left","bottom"),f(e[3],"right","bottom")].join("")}}(t);return i?e.replace(/<image[^>]*>/,i):e}(n,t)},style:{width:i,height:i}}),(0,u.jsx)(o.xH,{accessibilityLabel:this.props.i18n._('Loading Pincode Image', 'accessibility label for loading the Pincode image', 'accessibility label for loading the Pincode image'),show:!n})]})}}function w(e){let t=(0,l.ZP)(),i=(0,m.Z)({name:"ApiResource",options:{url:"/v3/pincode/image/",data:{object_id:e.id,hero_image_url:e.imageUrls[0]||x}}});return(0,u.jsx)(_,{...e,i18n:t,pincodeImageResource:i})}function P(e,t,i){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let b="pincodeMain",y="pincodeCTA";class j extends r.PureComponent{constructor(...e){super(...e),P(this,"state",{ctaIsLoaded:!1,errorFlyoutIsOpen:!1,isDownloading:!1,isFetchingPincodeImage:!1,isPickingHeroImage:!1,pickedImageIndex:0}),P(this,"getCustomHeroImages",()=>{let{images:e,customizable:t}=this.props,{pickedImageIndex:i}=this.state;if(!t)return e;let n="logo"!==i&&e[i];return n?[n]:[]}),P(this,"normalizeUrl",e=>{let{getMainImageURL:t}=this.props;return(t||(e=>e))(e).replace(/^https:\/\/[^\/]{2,}\.pinimg.com\//,"https://i.pinimg.com/")}),P(this,"handleFetchChange",e=>{this.setState({isFetchingPincodeImage:e})}),P(this,"handleCancelButtonClick",()=>this.setState({isPickingHeroImage:!1})),P(this,"handleEditButtonClick",()=>this.setState({isPickingHeroImage:!0})),P(this,"handleSelectImage",e=>this.setState({isPickingHeroImage:!1,pickedImageIndex:e})),P(this,"downloadPincodeImage",()=>{let{previewNode:e}=this,{ctaIsLoaded:t,isFetchingPincodeImage:i,isDownloading:n}=this.state;if(!e||!t||i||n)return;let s=e.querySelector(`.${b}`),r=e.querySelector(`.${y}`);if(!s||!r)return;let{getDownloadImageURL:o,id:a,logContextEvent:l}=this.props;l({event_type:7078,component:13141,object_id_str:a}),this.setState({isDownloading:!0}),Promise.all([d(s,o),d(r)]).then(e=>{let[t,i]=e;return((e,t)=>{let i=document.createElement("canvas");i.width=3544,i.height=3544;let n=Math.round(.1*i.width),s=Math.round(.05*i.width),r=i.width-2*n,o=i.width-2*s,a=i.height-r,[l,c]=t.width/t.height>o/a?[o,o/t.width*t.height]:[a/t.height*t.width,a],d=i.getContext("2d");return d&&(d.fillStyle="#fff",d.fillRect(0,0,i.width,i.height),d.drawImage(e,n,0,r,r),d.drawImage(t,(i.width-l)/2,r+(i.height-r-c)/2,l,c)),i})(t,i)}).then(e=>{var t;return t=`pincode_${this.props.id}.png`,new Promise((i,n)=>{new Promise((t,i)=>{if(e.toBlob)return void e.toBlob(t);let n="";try{n=e.toDataURL("image/png")}catch(e){i()}let s=window.atob(n.split(",")[1]),{length:r}=s,o=new Uint8Array(r);for(let e=0;e<r;e+=1)o[e]=s.charCodeAt(e);t(new window.Blob([o],{type:"image/png"}))}).then(e=>window.URL.createObjectURL(e)).then(e=>{let n=document.createElement("a");n.download=t,n.href=e,n.style.display="none",window.document.body.appendChild(n),window.requestAnimationFrame(()=>{let t=()=>{window.requestAnimationFrame(()=>{window.URL.revokeObjectURL(e),n.removeAttribute("href"),n.removeEventListener("click",t),window.document.body.removeChild(n),i()})};n.addEventListener("click",t),n.click()})}).catch(n)})}).then(()=>{this.setState({isDownloading:!1})}).catch(()=>{this.setState({errorFlyoutIsOpen:!0})})})}render(){let{id:e,isLoadingImages:t,images:i,getThumbnailImageSrcSet:n,customizable:s}=this.props,{ctaIsLoaded:r,errorFlyoutIsOpen:a,isFetchingPincodeImage:l,isDownloading:c,isPickingHeroImage:d}=this.state;return d?(0,u.jsx)(o.xu,{color:"default",padding:4,rounding:2,width:350,children:(0,u.jsxs)(o.xu,{children:[(0,u.jsx)(o.xu,{paddingY:1,children:(0,u.jsx)(o.X6,{lineClamp:1,size:"600",children:this.props.i18n._('Change Image', 'Title of the Pincode hero image picker modal', 'Title of the Pincode hero image picker modal')})}),(0,u.jsx)(o.iz,{}),(0,u.jsx)(g,{getThumbnailImageSrcSet:n,images:i,onTouch:this.handleSelectImage}),(0,u.jsx)(o.xu,{padding:1,children:(0,u.jsx)(o.zx,{fullWidth:!0,onClick:this.handleCancelButtonClick,text:this.props.i18n._('Cancel', 'Button to dismiss Pincode hero image picker', 'Button to dismiss Pincode hero image picker')})})]})}):(0,u.jsx)(o.xu,{color:"default",marginBottom:4,paddingX:4,rounding:2,width:350,children:(0,u.jsxs)(o.xu,{children:[(0,u.jsx)(o.xu,{ref:e=>{this.previewNode=e},children:(0,u.jsxs)(o.xu,{alignItems:"center",color:"default",direction:"column",display:"flex",height:320,justifyContent:"center",width:"100%",children:[t?(0,u.jsx)(o.kC,{alignItems:"center",height:230,justifyContent:"center",width:"100%",children:(0,u.jsx)(o.xH,{accessibilityLabel:this.props.i18n._('Loading', 'accessibility label for loading spinner', 'accessibility label for loading spinner'),show:!0})}):(0,u.jsx)(w,{className:b,id:e,imageUrls:this.getCustomHeroImages().map(e=>this.normalizeUrl(e.url??"")),onFetchingChange:this.handleFetchChange,size:230}),(0,u.jsx)(o.xu,{alignItems:"center",display:"flex",justifyContent:"center",marginBottom:7,marginTop:2,children:(0,u.jsx)("div",{className:y,children:(0,u.jsx)(h.default,{height:78,onCtaDidLoad:()=>this.setState({ctaIsLoaded:!0}),width:300})})})]})}),(0,u.jsxs)(o.xu,{marginTop:2,padding:1,children:[s&&i.length>0&&(0,u.jsx)(o.xu,{paddingY:1,children:(0,u.jsx)(o.zx,{fullWidth:!0,onClick:this.handleEditButtonClick,text:this.props.i18n._('Change Image', 'Button to pick Pincode hero image', 'Button to pick Pincode hero image')})}),r&&(0,u.jsxs)(o.xu,{paddingY:1,children:[(0,u.jsx)(o.xu,{ref:e=>{this.downloadButton=e},children:(0,u.jsx)(o.zx,{color:"red",disabled:t||l||c,fullWidth:!0,onClick:this.downloadPincodeImage,text:this.props.i18n._('Download Pincode', 'Button to download the Pincode image', 'Button to download the Pincode image')})}),a&&(0,u.jsx)(o.J2,{anchor:this.downloadButton,idealDirection:"down",onDismiss:()=>this.setState({errorFlyoutIsOpen:!1}),shouldFocus:!1,size:"sm",children:(0,u.jsx)(o.xu,{"data-test-id":"error-flyout-content",padding:3,children:(0,u.jsx)(o.qb,{title:this.props.i18n._('Oops! Your browser does not support downloading Pincodes.', 'Error message shown when user attempts to download Pincode on a browser not supported', 'Error message shown when user attempts to download Pincode on a browser not supported'),type:"problem"})})})]})]})]})})}}function S(e){let{logContextEvent:t}=(0,a.u)(),i=(0,l.ZP)();return(0,u.jsx)(j,{...e,i18n:i,logContextEvent:t})}},253969:function(e,t,i){i.d(t,{Z:()=>c});var n=i(667294),s=i(20256),r=i(980787),o=i(982166),a=i(525839),l=i(785893);function c({children:e,objectId:t,onHide:i}){let{logContextEvent:c}=(0,r.u)(),d=(0,a.ZP)(),h={component:13141,object_id_str:t};return(0,n.useEffect)(()=>{c({event_type:6359})},[t]),(0,l.jsx)(o.ZP,{accessibilityModalLabel:d._('Pincode', 'pincode.pincodemodal.label', 'Accessible label for a modal showing the pincode modal'),heading:d._('Pincode', 'pincode.pincodemodal.heading', 'Heading for a modal showing the pincode.'),onDismiss:()=>{i(),c({event_type:6358,...h})},size:"sm",children:(0,l.jsx)(s.kC,{alignItems:"stretch",justifyContent:"center",children:e})})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/93961-45ff03a66a460c56.mjs.map