(self.modernJsonp=self.modernJsonp||[]).push([["21798"],{464532:function(e,a,l){l.r(a),l.d(a,{default:()=>i});let n=(t=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],r=[{kind:"Variable",name:"pin",variableName:"pinId"}],u={alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null},d={alias:null,args:null,concreteType:"AggregateRatingMetadata",kind:"LinkedField",name:"aggregateRating",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ratingValue",storageKey:null}],storageKey:null},c={alias:"image236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:o=[s={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:'additionalImagesPerSpec(spec:"236x")'},_={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{fragment:{argumentDefinitions:t,kind:"Fragment",metadata:null,name:"CloseupPageDesktopQuery",selections:[{alias:null,args:r,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[s,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[u,{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[d],storageKey:null},{args:null,kind:"FragmentSpread",name:"CloseupPageDesktop_pin"}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"CloseupPageDesktopQuery",selections:[{alias:null,args:r,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[s,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[u,{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[d,{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"itemId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"itemSetId",storageKey:null},c,g={alias:"image474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:o,storageKey:'additionalImagesPerSpec(spec:"474x")'},p={alias:"image564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:o,storageKey:'additionalImagesPerSpec(spec:"564x")'},m={alias:"image736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:o,storageKey:'additionalImagesPerSpec(spec:"736x")'}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isOosProduct",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isStaleProduct",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,concreteType:"Brand",kind:"LinkedField",name:"brand",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"signature",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ShippingInfo",kind:"LinkedField",name:"shippingInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"freeShippingPrice",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"freeShippingValue",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ProductVariantSet",kind:"LinkedField",name:"variantSet",plural:!1,selections:[{alias:null,args:null,concreteType:"DimensionMetadata",kind:"LinkedField",name:"dimensionMetadata",plural:!0,selections:[_,{alias:null,args:null,kind:"ScalarField",name:"values",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ProductVariant",kind:"LinkedField",name:"variants",plural:!0,selections:o,storageKey:null}],storageKey:null},c,g,p,m],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:[_],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[{alias:null,args:null,concreteType:"PinCarouselSlot",kind:"LinkedField",name:"carouselSlots",plural:!0,selections:o,storageKey:null},y],storageKey:null},{alias:null,args:null,concreteType:"ProductMetadataV2",kind:"LinkedField",name:"productPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"ItemMetadata",kind:"LinkedField",name:"items",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"additionalImagesLength",storageKey:null}],storageKey:null},y],storageKey:null},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:o,storageKey:'images(spec:"orig")'},{alias:null,args:null,kind:"ScalarField",name:"shoppingFlags",storageKey:null},{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isShopTheLook",storageKey:null},y],storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[s,y],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},s,{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"gridDescription",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isGoLinkless",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"seoTitle",storageKey:null},y],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"4dba54d933723961cb76bd879b51910b96030d0a21eb0148b743c086929f8967",metadata:{},name:"CloseupPageDesktopQuery",operationKind:"query",text:null}});n.hash="3e5e91c4b622e8c344672c0f5a2b65a8";let i=n;var t,r,s,u,d,o,c,g,p,m,_,y,k=n.default||n;if("query"===k.params.operationKind)if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(k);else{let e=[k.params.name,k.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[e]=k}},295977:function(e,a,l){l.r(a),l.d(a,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupPageDesktop_pin",selections:[{args:null,kind:"FragmentSpread",name:"useGetStringifiedCommerceAuxData_pin"},{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"gridDescription",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isGoLinkless",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"seoTitle",storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};n.hash="9b6d0fabe3eb4d1aea5102ede0ed6b13";let i=n},509286:function(e,a,l){l.d(a,{A:()=>n});let n="socialPinLanding"},428778:function(e,a,l){l.d(a,{Z:()=>r});var n=l(575108),i=l(657043),t=l(199593);function r(){let{conversationCreate:e}=(0,t.Z)();return async a=>{let l,t=n.Z.create("ConversationsResource",a);try{let a=(await t.callCreate()).resource_response.data;a&&(e(a),l=a)}catch(e){throw Error((0,i.Z)(e,"message"))}return l}}},859685:function(e,a,l){l.d(a,{$p:()=>F,_l:()=>f,cO:()=>b,t2:()=>L,w2:()=>K,xM:()=>v});var n=l(667294),i=l(616550),t=l(821342),r=l(506662),s=l(274320),u=l(15667),d=l(886981),o=l(378888),c=l(647709),g=l(785893);let p="UnauthDesktopSocialPinLandingPageContext",m="UnauthMobileSocialPinLandingPageContext",_="AthDesktopSocialPinLandingPageContext",y="AuthMobileSocialPinLandingPageContext",k=(0,n.createContext)({hasSeenAuthDesktopLandingToast:!1,hasSeenAuthMobileLandingToast:!1,setHasSeenAuthDesktopLandingToast:()=>{},setHasSeenAuthMobileLandingToast:()=>{},hasDismissedLoginModal:!1,setHasDismissedLoginModal:()=>{},pinImageUrl:"",setPinImageUrl:()=>{}}),h=({children:e})=>{let[a,l]=(0,n.useState)(!1),[i,t]=(0,n.useState)(!1),[r,s]=(0,n.useState)(!1),[u,d]=(0,n.useState)(""),o=(0,n.useMemo)(()=>({hasSeenAuthMobileLandingToast:a,setHasSeenAuthMobileLandingToast:l,hasSeenAuthDesktopLandingToast:i,setHasSeenAuthDesktopLandingToast:t,hasDismissedLoginModal:r,setHasDismissedLoginModal:s,pinImageUrl:u,setPinImageUrl:d}),[a,i,r,s,u,d]);return(0,g.jsx)(k,{value:o,children:e})},S=(0,n.createContext)({key:"",data:null}),P=({children:e})=>{let a=(0,i.TH)(),{isSocialBot:l,isBot:h}=(0,u.B)(),P=(0,t.Z)(),v=P&&P.isAuth,b=(0,c.HG)(),F=(0,n.useMemo)(()=>(0,r.fY)(a)&&(0,o.mB)(a.search).invite_code||"",[a]),f=(0,n.useMemo)(()=>{let e=(0,i.LX)(a.pathname,{path:"/pin/:id"});return String(e&&"id"in e.params&&e.params.id)||""},[a.pathname]),[L,K]=(0,n.useState)({key:"",data:null}),x=!v&&b,w=!v&&!b,{checkExperiment:T}=(0,s.ru)(),{hasDismissedLoginModal:A}=(0,n.useContext)(k),{inDwebUnauthSocialPinLandingExp:E,unauthDwebSocialPinLandingGroup:C,inMwebUnauthSocialPinLandingExp:D,unauthMwebSocialPinLandingGroup:I,inMwebUnauthSocialPinLandingSecondaryUpsellExp:M,unauthMwebSocialPinLandingSecondaryUpsellGroup:R}=(0,n.useMemo)(()=>{let e=!h&&!l&&x&&F&&T("sg_dweb_unauth_social_pin_landing_page")||{anyEnabled:!1,group:void 0},a=!h&&!l&&w&&F&&(T("mweb_q2_mau_push_pc").anyEnabled&&T("mweb_q2_mau_push_pc")||T("mweb_q2_mau_push_pc_eu").anyEnabled&&T("mweb_q2_mau_push_pc_eu")||T("mweb_q2_mau_push_pc_advanced").anyEnabled&&T("mweb_q2_mau_push_pc_advanced")||T("mweb_q2_mau_push_pc_advanced_row").anyEnabled&&T("mweb_q2_mau_push_pc_advanced_row")||T("mweb_q2_mau_push_pc_emergency").anyEnabled&&T("mweb_q2_mau_push_pc_emergency")||T("mweb_q2_mau_push_pc_emergency_row").anyEnabled&&T("mweb_q2_mau_push_pc_emergency_row")||T("sg_mweb_unauth_social_pin_landing_page"))||{anyEnabled:!1,group:void 0},n=a.anyEnabled&&A&&T("sg_mweb_unauth_social_pin_landing_secondary_upsell")||{anyEnabled:!1,group:void 0};return{inDwebUnauthSocialPinLandingExp:e.anyEnabled,unauthDwebSocialPinLandingGroup:e.group,inMwebUnauthSocialPinLandingExp:a.anyEnabled,unauthMwebSocialPinLandingGroup:a.group,inMwebUnauthSocialPinLandingSecondaryUpsellExp:n.anyEnabled,unauthMwebSocialPinLandingSecondaryUpsellGroup:n.group}},[h,l,x,w,F,T,A]),Z="enabled_popover_profile"===C,j=(0,d.Z)(F?{name:"InviteCodeMetadataResource",options:{invite_code:F,field_set_key:Z?"default_with_sender_recent_pins":"default"}}:null),G=j.isLoaded?j.data:null;(0,n.useEffect)(()=>{if(G){let e=G.sender??null,a=v&&e.id!==P.id&&e?.should_show_messaging&&P.should_show_messaging;if(x&&e){let a=null;a=E?{inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name,expGroup:C,inviterRecentPins:"enabled_popover_profile"===C&&e.recent_pin_images?.["222x"]||[],inviterUsername:"enabled_popover_profile"===C&&e.username||""}:[5,9,12,16].includes(G.invite_channel)?null:{inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name},K({key:p,data:{inviter:e,popoverData:a}})}else if(w&&e){if(D){let a={inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name,expGroup:I};M&&(a.secondaryExpGroup=R),K({key:m,data:{upsellData:a}})}}else a&&!b?K({key:y,data:{toastData:{inviter:{inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name,inviterId:e.id},viewer:{viewerId:P.id||""},pin:{pinId:f}}}}):a&&b&&K({key:_,data:{toastData:{inviter:{inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name,inviterId:e.id},viewer:{viewerId:P.id||""},pin:{pinId:f}}}})}else K({key:"",data:null})},[G,v,b,f,P,E,D,I,w,C,x,M,R]);let U=(0,n.useMemo)(()=>L,[L]);return(0,g.jsx)(S,{value:U,children:e})},v=({children:e})=>(0,g.jsx)(h,{children:(0,g.jsx)(P,{children:e})}),b=()=>{let e=(0,n.useContext)(S);return e.key===p?e:null},F=()=>{let e=(0,n.useContext)(S);return e.key===m?e:null},f=()=>{let e=(0,n.useContext)(S);return e.key===y?e:null},L=()=>{let e=(0,n.useContext)(S);return e.key===_?e:null},K=()=>(0,n.useContext)(k)},153287:function(e,a,l){l.d(a,{Z:()=>S});var n=l(616550),i=l(20256),t=l(980787),r=l(657043),s=l(744862),u=l(475498),d=l(821342),o=l(525839),c=l(302148),g=l(87853),p=l(647709),m=l(509286),_=l(428778),y=l(199593),k=l(859685),h=l(785893);function S({hideToast:e,pinAttachment:a}){let l=(0,o.ZP)(),S=(0,n.k6)(),{logContextEvent:P}=(0,t.u)(),{showToast:v}=(0,g.dI)(),b=(0,_.Z)(),F=(0,d.Z)(),{conversationOpen:f,dropdownOpen:L,setObjectAttachment:K}=(0,y.Z)(),x=(0,p.HG)(),w=(0,k.t2)(),T=(0,k._l)(),A=x?w?.data:T?.data,E=A&&"toastData"in A?A.toastData:null,C=x?14344:14343;if(E){let{inviter:n,viewer:t}=E,d=(0,h.jsx)(i.xv,{inline:!0,weight:"bold",children:n.inviterName}),o=(0,h.jsx)(i.xv,{children:(0,c.nk)(l._('Like this Pin? Let {{ inviterName }} know.', 'SocialPinLandingPage.AuthSocialPinLandingPage.toastText', 'text to show info about this invite, inviterName: the name of inviter'),{inviterName:d})}),g=async()=>{P({event_type:x?101:102,view_type:3,view_parameter:156,component:C});try{let e=await b({user_ids:[n.inviterId,t.viewerId]});if(e){let l=e.id;(({conversationId:e,pinAttachment:a})=>{x?(L(),f(e)):S.push(`/conversation/${e}`),K(a)})({conversationId:l,pinAttachment:{...a,source:m.A}})}}catch(e){v(({hideToast:a})=>(0,h.jsx)(u.Z,{onHide:a,text:(0,r.Z)(e,"message")??""}))}};return P({event_type:13,view_type:3,view_parameter:156,component:C}),(0,h.jsx)(i.kC,{justifyContent:"center",children:(0,h.jsx)(i.iP,{onTap:()=>{g(),e()},children:(0,h.jsx)(u.Z,{duration:7e3,onHide:e,primaryAction:{accessibilityLabel:l._('Reply', 'SocialPinLandingPage.AuthToast.replyButtonAccessibilityLabel', 'reply back to a Pin shared to the viewer'),label:l._('Reply', 'SocialPinLandingPage.AuthToast.replyButton', 'reply back to a Pin shared to the viewer'),size:"lg",onClick:()=>{}},text:o,thumbnail:{avatar:(0,h.jsx)(s.qE,{color:F.isAuth?F.avatar_color_index:void 0,name:n.inviterName,src:n.inviterAvatarUrl})}})})})}}},342531:function(e,a,l){l.d(a,{Z:()=>j});var n,i,t=l(667294),r=l(167912),s=l(616550),u=l(20256),d=l(738628),o=l(115939),c=l(889144),g=l(238589);function p({isShowing:e,pinId:a,prevPinId:l,storageKey:n}){let i=(0,g.Nl)();(0,t.useEffect)(()=>{if(a===l&&e){let e=i.getItem(n)||0;i.setItem(n,e+1)}},[e,a,l,i,n])}var m=l(121836),_=l(140725),y=l(821342),k=l(415546),h=l(390843),S=l(453179),P=l(821806),v=l(87853),b=l(431338),F=l(973940),f=l(394887),L=l(807765),K=l(477464),x=l(370347),w=l(620427),T=l(859685),A=l(153287),E=l(169053),C=l(785893);let D=void 0!==n?n:n=l(464532),I=void 0!==i?i:i=l(295977);function M({isEligibleForPdp:e,pinId:a,ratingValue:l,pinKey:n}){let i=(0,h.aX)(),r=(0,s.k6)(),g=(0,s.TH)(),P=(0,F.Z)(a),f=(0,y.Z)(),{trafficSource:x}=(0,o.Z)(i,f.isAuth),E=(0,k.Z)(I,n),D=E?.gridTitle||E?.gridDescription||E?.richMetadata?.title||E?.richSummary?.displayName||E?.richMetadata?.article?.name,{showToast:M}=(0,v.dI)(),{isShowingShareButton:R,isShowingVisualSearchButton:Z}=(0,L.f)(),j=(0,T.t2)(),G=(0,T.w2)();(0,t.useEffect)(()=>{document.title=D?.trim()||E?.seoTitle?.trim()||S.yp},[D,E?.seoTitle]),(0,t.useEffect)(()=>{if(!G||G.hasSeenAuthDesktopLandingToast)return()=>{};let{setHasSeenAuthDesktopLandingToast:e}=G,l=setTimeout(()=>{if(j){let l={type:"pin",id:a};e(!0),M(({hideToast:e})=>(0,C.jsx)(A.Z,{hideToast:e,pinAttachment:l}))}},3e3);return()=>{clearTimeout(l)}},[j,a,M,G]);let U=(0,b.Z)(E);return((0,_.Q)({view_type:3,object_id_str:a,view_data:{pin_id:a},component:13283,aux_data:{current_page_url:g.pathname+g.search,closeup_navigation_type:(0,K.Z)(r,x),...U(),...l?{rating_value:l}:{},is_go_linkless:!!E?.isGoLinkless},clientTrackingParams:(0,w.Z)((g?.state||{}).trackingParams,E?.trackingParams)},a),p({isShowing:R,pinId:a,prevPinId:P,storageKey:m.bl}),p({isShowing:Z,pinId:a,prevPinId:P,storageKey:m.Ml}),e)?(0,C.jsx)(u.xu,{"data-test-id":"pdp-container",children:(0,C.jsx)(c.Z,{})}):(0,C.jsx)(u.xu,{"data-test-id":"closeup-container",children:(0,C.jsx)(d.ZP,{})})}function R({pinId:e}){let a=function({pinId:e}){return{query:D,variables:{pinId:e}}}({pinId:e}),l=(0,r.useLazyLoadQuery)(D,a.variables),n=l.v3GetPinQuery?.data;return(0,C.jsx)(M,{isEligibleForPdp:n?.isEligibleForPdp??!1,pinId:e,pinKey:n,ratingValue:n?.richSummary?.aggregateRating?.ratingValue})}function Z({pinId:e}){let a=(0,E.S6)(),l=e?a(e):null;return(0,C.jsx)(M,{isEligibleForPdp:l?.is_eligible_for_pdp??!1,pinId:e,pinKey:null!=l?{type:"deprecated",data:l}:null,ratingValue:l?.rich_summary?.aggregate_rating?.rating_value})}function j(){let{id:e}=(0,s.UO)(),{isGraphQLEnabledInGeneral:a}=(0,x.nF)();return(0,C.jsx)(f.Z,{type:"authDesktop",children:(0,C.jsx)(L.c,{children:a?(0,C.jsx)(P.Z,{children:(0,C.jsx)(R,{pinId:e})}):(0,C.jsx)(Z,{pinId:e})})})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/21798-5299c022053d663b.mjs.map