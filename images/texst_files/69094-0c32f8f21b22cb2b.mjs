(self.modernJsonp=self.modernJsonp||[]).push([["69094"],{10594:function(e,t,a){a.d(t,{Z:()=>o});let o=e=>({isAnalyticsSite:4===e,isSterlingSite:3===e,isWwwSite:0===e,isTrendsSite:7===e,isPlanningHub:12===e})},10423:function(e,t,a){a.d(t,{Z:()=>s});let o=function(e,t){this.uid=e,this.item=t,this.next=null,this.prev=null},r=function(e){this._maxNumItems=e||10,this._uidToData={},this._numItems=0,this._firstData=null,this._lastData=null};r.prototype.set=function(e,t){let a=this._uidToData[e];a||(a=new o(e,t),this._uidToData[e]=a,this._numItems+=1),this._moveToFront(a),this._numItems>this._maxNumItems&&this._evict()},r.prototype.get=function(e){let t=this._uidToData[e];return t?(this._moveToFront(t),t.item):null},r.prototype.remove=function(e){let t=this._uidToData[e];t&&(delete this._uidToData[e],this._firstData===t&&(this._firstData=t.next),this._lastData===t&&(this._lastData=t.prev),t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),this._numItems-=1)},r.prototype._moveToFront=function(e){this._firstData!==e&&(this._firstData?(this._lastData===e&&(this._lastData=e.prev),e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),this._firstData.prev=e,e.next=this._firstData,e.prev=null,this._firstData=e):(this._firstData=e,this._lastData=e))},r.prototype._evict=function(){delete this._uidToData[this._lastData.uid],this._firstData===this._lastData?(this._firstData=null,this._lastData=null):(this._lastData=this._lastData.prev,this._lastData.next=null),this._numItems-=1};let s=r},10972:function(e,t,a){a.d(t,{Z:()=>s});var o=a(667294),r=a(490193);function s({allowSearchOnMount:e,children:t,onTypeaheadSuggestionsChange:a,resourceName:s,resourceOptions:i,value:l}){let n=(0,r.Z)({allowSearchOnMount:e,resourceName:s,resourceOptions:i,value:l});return(0,o.useEffect)(()=>{n?.length&&a(n)},[n]),t||null}},490193:function(e,t,a){a.d(t,{Z:()=>i});var o=a(667294),r=a(10423),s=a(791948);function i({allowSearchOnMount:e=!1,resourceName:t,resourceOptions:a={},value:i}){let l=(0,o.useRef)(!1),n=(0,o.useRef)({}),[d,c]=(0,o.useState)([]),h=function({resourceName:e,resourceOptions:t}){let a=(0,s.vL)(),i=(0,o.useRef)(void 0);return i.current||(i.current=function({resourceCreator:e,resourceName:t,resourceOptions:a}){let o=e(t,{...a,count:"count"in a?a.count:5}),s=new r.Z,i=()=>{o.abort()},l=async(e,t)=>{if(o.isCalling()){let a=o.options?.term,r=o.options?.pin_scope;if(e===a&&t===r)return;i()}let{bookmarks:a,...r}=o.options||{};o.options={...r,term:e,pin_scope:t};let{data:l}=(await o.callGet({showError:!1})).resource_response,n=l?.items,d=l?.hint||{};return s.set(`${t}-${e}`,{hint:d,items:n}),{term:e,items:n,hint:d}};return async function(e,t){let a=s.get(`${t}-${e}`);if(a){let{items:t}=a;if(t&&t.length){i();let{hint:o}=a;return{hint:o,items:t,term:e}}}return e.length>=0?l(e,t):{hint:{},items:[],term:e}}}({resourceCreator:a,resourceName:e,resourceOptions:t})),i.current}({resourceName:t,resourceOptions:a}),_=a.pin_scope||"pins",u=`${_}-${i}`;return(0,o.useEffect)(()=>{(async()=>{if(null!=i&&""!==i&&(e||l.current))if(u in n.current)c(n.current[u]);else try{let e=await h(i,_);if(e){let{items:t}=e;n.current[u]=t,c(t)}}catch(e){if("Resource call aborted"===e)return;throw e}l.current||(l.current=!0)})()},[i,_,u]),d}},968842:function(e,t,a){a.d(t,{Z:()=>s});var o=a(647709),r=a(183152);function s(){return function({deviceType:e,site:t}){switch(t){case"analytics":return 4;case"business":return 6;case"planninghub-internal":return 12;case"sterling":return 3;case"trends":return 7;case"trends-internal":return 8;case"commerce-app":case"commerce-app-latest":case"pintergration":return 10;case"creators":case"create":return 11;case"newsroom":return 13;case"about":return 14;case"pinnacle-internal":return 17;default:return+("phone"===e||"tablet"===e)}}({deviceType:(0,o.ZP)(),site:(0,r.uo)()})}},277454:function(e,t,a){a.d(t,{Z:()=>r});let o=/^[\w.!#$%&'*+\-\/=?\^`{|}~]+@[a-z\d\-]+(\.[a-z\d\-]+)+$/i,r=e=>o.test(e)},742723:function(e,t,a){a.d(t,{Z:()=>c,l:()=>d});var o=a(667294),r=a(10594),s=a(15667),i=a(968842),l=a(821651),n=a(448505);let d=(0,o.createContext)(void 0),c=function(){let{advertiser:e}=(0,s.B)(),t=function(){let{isSterlingSite:e}=(0,r.Z)((0,i.Z)());return(0,o.useContext)(d)??e}(),a=(0,n.Z)(),c=((0,l.W)()?.profiles||[]).find(t=>t?.id===e?.owner_user_id);return t&&c||a}},947810:function(e,t,a){a.d(t,{Z:()=>i});var o=a(821342),r=a(448505),s=a(7872);let i=()=>{let e=(0,o.Z)(),t=(0,r.Z)();return(0,s.lJ)(e,t)}},789302:function(e,t,a){a.d(t,{Z:()=>x});var o=a(667294),r=a(581722),s=a(20256),i=a(918920),l=a(821342),n=a(525839),d=a(742723),c=a(7872),h=a(931267),_=a(415602),u=a(890774),b=a(785893);function m(e,t,a){var o;return(t="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var o=a.call(e,t||"default");if("object"!=typeof o)return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?o:o+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class g extends o.Component{constructor(...e){super(...e),m(this,"handleSubmit",e=>{let{advertiserId:t,boardCreateSource:a,createBoard:o,onBoardCreate:r,viewer:s,orbacActingAs:i,shouldShowAddCollaborators:l,handleInviteSelectedCollaborators:n}=this.props,d=(0,c.lJ)(s,i),{name:h,description:_,privacy:u,collab_board_email:b,collaborator_invites_enabled:m}=e;return o({boardCreateOptions:{name:h,description:_,privacy:u,collab_board_email:b,collaborator_invites_enabled:m,aux_data:{source:a},...t?{advertiser_id:t}:{},...d?{orbac_subject_id:d}:Object.freeze({})}}).then(e=>{l&&n(e.id),r(e)})}),m(this,"emptyBoardData",{collab_board_email:!0,collaborator_invites_enabled:!1,id:"",is_collaborative:!1,name:this.props.suggestedBoardName||"",description:"",category:"other",owner:{username:(0,c.Ms)(this.props.viewer,this.props.orbacActingAs)},pin_count:0})}render(){let{advertiserId:e,isAdAccountOwner:t,onClose:a,privacy:o,useModalWithNoLayer:r,showSecretBoardCreateToggle:l,shouldShowAddCollaborators:n,setSelectedContacts:d,selectedContacts:_,orbacActingAs:u,viewer:m}=this.props,g=(0,c.lJ)(m,u);return(0,b.jsx)(h.Z,{board:{...this.emptyBoardData,...{privacy:t?o:i.ZP.BoardPrivacy.PROTECTED}},currentUserIsOwner:!0,isAdAccount:!!e,isAdAccountOwner:t,isDeletable:!1,isEditable:!0,isNameAndSecretView:!0,isProfilePublisher:!!g,onClose:a,onSubmit:this.handleSubmit,selectedContacts:_,setSelectedContacts:d,shouldShowAddCollaborators:n,showSecretBoardCreateToggle:l,submitText:this.props.i18n._('Create', ' - ', ' -- '),title:(0,b.jsx)(s.xu,{paddingY:8,width:"100%",children:(0,b.jsx)(s.X6,{align:"center",size:"600",children:this.props.i18n._('Create board', 'BoardCreate.BoardCreate', 'Modal heading')})}),useModalWithNoLayer:r})}}function x(e){let t=(0,u.Z)(),a=(0,n.ZP)(),s=(0,l.Z)(),i=(0,r.v9)(({advertiser:e})=>e?e.id:void 0),c=(0,d.Z)(),h=(0,r.v9)(({advertiser:e})=>!e||s.isAuth&&e.owner_user_id===s.id),m=(0,_.zC)(),x=(0,_.DK)(),[p,v]=(0,o.useState)([]);return(0,b.jsx)(g,{...e,advertiserId:i,createBoard:t,dispatch:(0,r.I0)(),handleInviteSelectedCollaborators:e=>{let t=p.filter(e=>"email"===e.type||"email_share_suggestion"===e.type),a=p.filter(e=>"user"===e.type||"user_share_suggestion"===e.type);a.length>0&&x(e,a.map(e=>e.id)),t.length>0&&m(e,t.map(e=>e.id))},i18n:a,isAdAccountOwner:h,orbacActingAs:c,selectedContacts:p,setSelectedContacts:v,viewer:s})}m(g,"defaultProps",{privacy:i.ZP.BoardPrivacy.PUBLIC})},931267:function(e,t,a){a.d(t,{Z:()=>K});var o=a(667294),r=a(20256),s=a(918920),i=a(657043),l=a(982166),n=a(678213),d=a(525839),c=a(302148),h=a(274320),_=a(15667),u=a(782259),b=a(473728),m=a(87853),g=a(647709),x=a(640924),p=a(271597),v=a(744862),C=a(821342),f=a(886981),j=a(10972),P=a(277454),y=a(785893);function A({selectedContacts:e=[],setSelectedContacts:t}){let a=(0,d.ZP)(),s=(0,C.Z)(),i=s.isAuth?s?.avatar_color_index:void 0,{data:l}=(0,f.Z)({name:"ShareSuggestionsResource",options:{field_set_key:"default",hide_group_conversations:!0},noCache:!0}),[n,c]=(0,o.useState)([]);(0,o.useEffect)(()=>{l&&c(l.map(e=>"email_share_suggestion"===e.type?{...e,id:e.email||""}:e))},[l]);let[h,_]=(0,o.useState)(""),u=e.map(e=>e.id),b=[...e,(0,P.Z)(h)&&!u.includes(h)?{id:h,type:"email"}:null,...n.filter(e=>!u.includes(e.id))].filter(Boolean);return(0,y.jsxs)(r.kC,{alignItems:"stretch",direction:"column",height:"100%",justifyContent:"start",children:[(0,y.jsx)(r.xu,{paddingY:2,children:(0,y.jsx)(r.xv,{size:"100",children:a._('Add collaborators', 'text indicates that this section is for adding collaborators to a board', 'boardCreate.addCollaborators.heading')})}),(0,y.jsx)(r.xu,{marginBottom:4,marginTop:2,width:"100%",children:(0,y.jsx)(r.xu,{children:(0,y.jsx)(j.Z,{onTypeaheadSuggestionsChange:e=>{c(e)},resourceName:"ShareSuggestionsTypeaheadResource",value:h,children:(0,y.jsx)(r.Um,{accessibilityLabel:a._('Search for collaborators by name or email', 'users can search for other people and add them as collaborators to a board', 'boardCreate.searchBar.accessibilityLabel'),id:"CollaboratorInviteSearchField",onChange:({value:e})=>{_(e)},placeholder:a._('Search by name or email', 'text in search field to indicate that users could search for other users here', 'boadCreate.searchBar.placeHolder'),size:"lg",value:h})})})}),(0,y.jsx)(r.xu,{overflow:"scrollY",children:b.map(o=>(0,y.jsxs)(r.xu,{display:"flex",paddingY:2,children:[(0,y.jsxs)(r.kC,{flex:"grow",children:["email"===o.type||"email_share_suggestion"===o.type?(0,y.jsx)(r.xu,{alignItems:"center",color:"secondary",display:"flex",flex:"none",height:48,justifyContent:"center",marginEnd:3,rounding:"circle",width:48,children:(0,y.jsx)(r.JO,{accessibilityLabel:a._('Email icon', 'Email icon on board create modal', 'boardCreate.emailIcon'),color:"default",icon:"envelope",size:24})}):(0,y.jsx)(r.xu,{display:"flex",flex:"none",height:48,marginEnd:3,width:48,children:(0,y.jsx)(v.qE,{color:i,name:o.full_name||"",size:"fit",src:o.image_medium_url||o.image_large_url})}),"email"===o.type||"email_share_suggestion"===o.type?(0,y.jsx)(r.kC,{alignItems:"center",children:(0,y.jsx)(r.xu,{children:(0,y.jsx)(r.xv,{size:"300",children:o.id})})}):(0,y.jsxs)(r.kC,{direction:"column",justifyContent:"center",children:[(0,y.jsx)(r.xu,{marginBottom:1,tabIndex:0,children:(0,y.jsx)(r.xv,{lineClamp:1,size:"300",children:o.full_name})}),(0,y.jsx)(r.xu,{tabIndex:0,children:(0,y.jsx)(r.xv,{size:"200",children:`@${o.username||""}`})})]})]}),(0,y.jsx)(r.kC,{flex:"none",children:(0,y.jsx)(r.zx,{onClick:()=>{u.includes(o.id)?t?.((e||[]).filter(e=>e.id!==o.id)):t?.([...e,o])},selected:u.includes(o.id),size:"lg",text:u.includes(o.id)?a._('Added', 'Text that lets the user know they have added the contact', 'boardCreate.addedContactButton'):a._('Add', 'Text that lets the user know they can add that contact', 'boardCreate.addContactButton')})})]},o.id))})]})}var z=a(476482),B=a(509120);let w=({label:e,labelId:t})=>t?(0,y.jsx)(r.__,{htmlFor:t,children:(0,y.jsx)(r.xv,{size:"100",children:e})}):(0,y.jsx)(o.Fragment,{children:e});function E(e){let{children:t,label:a,labelId:s}=e;return(0,y.jsxs)(o.Fragment,{children:[(0,y.jsx)(r.xu,{marginBottom:2,children:(0,y.jsx)(w,{label:a,labelId:s})}),t]})}function S({coverPin:e,handleShowBoardCoverEditModal:t}){let a=(0,d.ZP)(),[s,i]=(0,o.useState)(!1),{isRTL:l}=(0,_.B)();return(0,y.jsx)(E,{label:(0,y.jsx)(r.X6,{accessibilityLevel:3,size:"100",children:(0,y.jsx)(r.xv,{inline:!0,size:"100",children:a._('Board cover', 'BoardForm.BoardFormCoverButton', 'Form label for updating board cover')})}),children:(0,y.jsx)(r.xu,{position:"relative",width:138,children:(0,y.jsx)(r.iP,{onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),onTap:t,rounding:4,children:e?.custom_cover?(0,y.jsxs)(o.Fragment,{children:[(0,y.jsx)(r.zd,{height:138,rounding:4,width:138,children:(0,y.jsx)(B.Z,{alt:e.image_url,color:"gray",customCover:e.custom_cover,height:138,imgPos:function(e){let{crop:t,size:a}=e||{};if(Array.isArray(t)&&Array.isArray(a))return{x:t[0]||0,y:t[1]||0,width:a[0]||0,height:a[1]||0}}(e),imgUrl:e.image_url||"",renderAsImage:!0,width:138})}),(0,y.jsx)(r.xu,{bottom:!0,left:l,padding:2,position:"absolute",right:!l,children:(0,y.jsx)(r.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{background:s?"white":"rgba(255, 255, 255, 0.8)"}},display:"flex",height:44,justifyContent:"center",rounding:"circle",width:44,children:(0,y.jsx)(r.JO,{accessibilityLabel:a._('Edit board cover', 'BoardForm.BoardFormBoardCoverButton', 'Accessibility label on icon'),color:"default",icon:"edit",size:16})})})]}):(0,y.jsx)(r.xu,{alignItems:"center",color:s?"darkWash":"secondary",display:"flex",height:138,justifyContent:"center",rounding:4,width:138,children:(0,y.jsx)(r.JO,{accessibilityLabel:a._('Add cover photo', 'BoardForm.BoardFormCoverButton', 'Accessibility label on icon'),color:"default",icon:"add",size:24})})})})})}function k({children:e,label:t,labelId:a,subtext:s}){return(0,y.jsx)(o.Fragment,{children:(0,y.jsxs)(r.xu,{alignItems:"center",display:"flex",justifyContent:"start",marginBottom:10,children:[e,(0,y.jsxs)(r.xu,{marginStart:2,children:[(0,y.jsx)(r.__,{htmlFor:a,children:(0,y.jsx)(r.xv,{size:"300",weight:"bold",children:t})}),s]})]})})}function F({hasCollabBoardEmail:e,isCollaborative:t,onCheckboxChange:a}){let o=(0,d.ZP)();return t&&(0,y.jsx)(k,{label:o._('Email notifications', 'BoardForm.BoardFormCollaboratorsEmailCheckbox', 'Form label'),labelId:"emailNotificationsCheckbox",subtext:(0,y.jsx)(r.xv,{color:"subtle",size:"300",children:o._('Get an email when someone saves Pins to this board', 'BoardForm.BoardFormCollaboratorsEmailCheckbox', 'Text explaing field on board form')}),children:(0,y.jsx)(r.kC,{alignItems:"center",justifyContent:"start",children:(0,y.jsx)(r.xu,{marginEnd:1,children:(0,y.jsx)(r.XZ,{checked:e,id:"emailNotificationsCheckbox",name:"email",onChange:a})})})})}var I=a(734263),D=a(812577);function T({board:e,onCollaboratorInviteClick:t}){let a=(0,d.ZP)(),o=(0,D.Z)({boardId:e.id,ownerName:e.owner.full_name??"",ownerUsername:e.owner.username,ownerImgSrc:e.owner.image_medium_url||e.owner.image_small_url||""}),s=o.slice(0,3).map(e=>e.name),i="";switch(o.length){case 3:i=(0,c.Wc)(`${a._('{{ first }}, {{ second }}, and {{ last }}', 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.ThreeAvatars', 'List of three usernames')}`,{first:`${s[0]}`,second:`${s[1]}`,last:`${s[2]}`});break;case 2:i=(0,c.Wc)(`${a._('{{ first }} and {{ second }}', 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.TwoAvatars', 'List of two usernames.')}`,{first:`${s[0]}`,second:`${s[1]}`});break;default:i=s.join(", ")}let l=o.length>3?(0,c.Wc)(a.ngettext('Collaborators: {{ userNames }} and {{ leftCount }} more.', 'Collaborators: {{ userNames }} and {{ leftCount }} more.', o.length - 3, 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.aboveThree', 'Accessibility label that lists the names of collaborators and a final count of non-displayed avatars'),{userNames:i,leftCount:`${o.length-3}`}):(0,c.Wc)(`${a._('Collaborators: {{ userNames }}.', 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.notAboveThree', 'Accessibility label that lists the names of collaborators')}`,{userNames:i});return(0,y.jsxs)(r.kC,{alignItems:"center",justifyContent:"between",children:[(0,y.jsx)(r.HE,{accessibilityLabel:l,collaborators:o.map(({name:e,src:t,color:a})=>({src:t?.endsWith("/default_75.png")?void 0:t,name:e,color:a})),size:"md"}),(0,y.jsx)(r.hU,{accessibilityLabel:a._('Invite collaborators', 'BoardEdit.BoardCollaboratorsAndInviteSection', 'Accessibility label on button'),bgColor:"lightGray",icon:"add",iconColor:"darkGray",onClick:t,size:"lg"})]})}function Z({board:e,onCollaboratorInviteClick:t}){let a=(0,d.ZP)(),o=(0,y.jsxs)(r.kC,{alignItems:"center",justifyContent:"start",children:[(0,y.jsx)(r.X6,{accessibilityLevel:3,size:"100",children:(0,y.jsx)(r.xv,{inline:!0,size:"100",children:a._('Collaborators', ' - ', ' -- ')})}),(0,y.jsx)(I.Z,{}),(0,y.jsx)(r.xv,{inline:!0,size:"100",weight:"bold",children:(0,y.jsx)(r.rU,{accessibilityLabel:a._('Learn more about creating and managing group boards.', 'BoardForm.BoardFormCollaboratorsInviteList', 'Accessibility label for link to learn more about group boards'),display:"inlineBlock",href:"https://www.pinterest.com/_/_/help/article/group-boards?source=board_create",target:"blank",underline:"hover",children:a._('Learn more', ' - ', ' -- ')})})]});return(0,y.jsx)(E,{label:o,children:(0,y.jsx)(T,{board:e,onCollaboratorInviteClick:t})})}function L({collaboratorInvitesEnabled:e,isCollaborative:t,onCheckboxChange:a}){let o=(0,d.ZP)();return t&&(0,y.jsx)(k,{label:o._('Let collaborators add people', 'BoardForm.BoardFormCollaboratorsInviteToggle', 'Form label'),labelId:"collaboratorInvitesEnabledCheckbox",children:(0,y.jsx)(r.XZ,{checked:e,id:"collaboratorInvitesEnabledCheckbox",name:"collaboratorInvitesEnabled",onChange:a})})}function R({description:e,descriptionValidatorErrors:t,onChange:a}){let o=(0,d.ZP)(),s="boardEditDescription";return(0,y.jsx)(E,{label:o._('Description', 'BoardForm.BoardFormDescription', ' Form field label'),labelId:s,children:(0,y.jsx)(r.Kx,{errorMessage:t.join(", "),id:s,name:"description",onChange:a,placeholder:o._('What\'s your board about?', ' - ', ' -- '),value:e})})}let M=({children:e})=>(0,y.jsx)(r.xu,{paddingX:8,role:"list",children:o.Children.map(e,(t,a)=>t&&(0,y.jsx)(r.xu,{marginBottom:a===o.Children.count(e)-1?1:8,role:"listitem",children:t},a))});function N({name:e,nameValidatorErrors:t,onChange:a,disabled:o}){let s=(0,d.ZP)();return(0,y.jsx)(E,{label:s._('Name', 'BoardForm.BoardFormTitleInput', 'Form field label'),labelId:"boardEditName",children:(0,y.jsx)(r.nv,{disabled:o,errorMessage:t.join(", "),id:"boardEditName",name:"boardName",onChange:a,placeholder:s._('Like "Places to Go" or "Recipes to Make"', ' - ', ' -- '),size:"lg",value:e})})}let O=({board:e,collabBoardEmail:t,collaboratorInvitesEnabled:a,coverPin:o,currentUserIsOwner:s,description:i,descriptionValidatorErrors:l,handleBoardLeave:n,isCollaborative:c,showCoverEdit:h,name:_,nameValidatorErrors:u,handleShowBoardCoverEditModal:b,handleChangeName:m,handleChangeDescription:g,handleShowCollaboratorsModal:x,handleChangeCollabBoardEmail:p,handleChangeCollaboratorInvitesEnabled:v,shouldShowCollaboratorsInviteToggle:C})=>{let f=(0,d.ZP)();return(0,y.jsxs)(M,{children:[h&&(0,y.jsx)(S,{coverPin:o,handleShowBoardCoverEditModal:b}),(0,y.jsx)(N,{disabled:!0,name:_,nameValidatorErrors:u,onChange:m}),(0,y.jsx)(R,{description:i,descriptionValidatorErrors:l,onChange:g}),s&&!!n&&(0,y.jsx)(Z,{board:e,onCollaboratorInviteClick:x}),c&&(0,y.jsx)(r.xu,{marginBottom:-7,children:(0,y.jsx)(r.xv,{size:"100",children:f._('Settings', 'BoardForm.BoardForm', 'Section heading in board edit form')})}),(0,y.jsx)(F,{hasCollabBoardEmail:t,isCollaborative:c,onCheckboxChange:p}),C&&(0,y.jsx)(L,{collaboratorInvitesEnabled:a,isCollaborative:c,onCheckboxChange:v})]})};function $({isProtectedToggler:e,isToggleDisable:t,onChange:a,onCheckboxChange:i,privacy:l}){let n=(0,d.ZP)();if(!0===e)return(0,y.jsx)(k,{label:n._('Protected board (not listed on user\'s profile)', 'BoardForm.BoardFormSecretToggle', 'protected board'),labelId:"protected",children:(0,y.jsx)(r.xu,{paddingY:2,children:(0,y.jsx)(r.rs,{disabled:t,id:"protected",onChange:a,switched:l===s.ZP.BoardPrivacy.PROTECTED})})});if(l!==s.ZP.BoardPrivacy.PROTECTED){let e=n._('Keep this board secret', 'BoardForm.BoardFormSecretToggle', 'Caption for board settings to set visibility'),a=(0,y.jsx)(o.Fragment,{children:(0,y.jsxs)(r.xv,{color:"subtle",inline:!0,size:"300",children:[n._('So only you and collaborators can see it.', 'BoardForm.BoardFormSecretToggle', 'notifying the board owner only they and the collaborators can see the board if it set to secret')," ",(0,y.jsx)(r.rU,{accessibilityLabel:n._('Learn more about secret boards.', 'BoardForm.BoardFormPrivacyToggle.Link', 'Accessibility label for link to learn more about secret boards'),display:"inline",href:"https://www.pinterest.com/_/_/help/article/change-board-privacy?source=secret_create",target:"blank",children:n._('Learn more', 'BoardForm.BoardFormSecretToggle', 'Link to learn more about secret boards')})]})});return(0,y.jsx)(k,{label:e,labelId:"secret",subtext:a,children:(0,y.jsx)(r.kC,{alignItems:"center",justifyContent:"start",children:(0,y.jsx)(r.XZ,{checked:l===s.ZP.BoardPrivacy.SECRET,disabled:t,id:"secret",name:"secret",onChange:i})})})}return null}function H({allowHomefeedRecommendations:e,onCheckboxChange:t}){let a=(0,d.ZP)();return(0,y.jsx)(k,{label:a._('Personalization', 'BoardForm.BoardFormRecommendationToggle', 'form label'),labelId:"recommendation",subtext:(0,y.jsx)(r.xv,{color:"subtle",size:"300",children:a._('Show Pins inspired by this board in your home feed.', 'BoardForm.BoardFormRecommendationToggle', 'Caption for board settings to set visibility')}),children:(0,y.jsx)(r.XZ,{checked:e,id:"recommendation",name:"recommendation",onChange:t})})}function X(e,t,a){var o;return(t="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var o=a.call(e,t||"default");if("object"!=typeof o)return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?o:o+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let U=(0,o.lazy)(()=>Promise.all([a.e("25418"),a.e("9204")]).then(a.bind(a,284484))),V=(0,o.lazy)(()=>Promise.all([a.e("91674"),a.e("54796"),a.e("29670"),a.e("54554")]).then(a.bind(a,826654))),W=(e,t)=>(0,x.Gy)({max:e,maxErrorString:(0,b.Z)(t._('Please enter no more than {{ maxLength }} characters.', 'Validation error when a string is too long', 'Validation error when a string is too long'),{maxLength:e})}),G=e=>[W(s.ZP.MAX_CHARS_FOR_BOARD_PIN_DESCRIPTION,e)],Y=e=>[(0,x.aH)({message:e._('Don\'t forget to name your board!', ' - ', ' -- ')}),W(s.ZP.MAX_CHARS_FOR_BOARD_TITLE,e)],J=({condition:e,children:t})=>e?(0,y.jsx)(r.xu,{position:"absolute",zIndex:n.b7,children:t}):t;class q extends o.Component{constructor(e){super(e),X(this,"handleChangeName",({value:e})=>{let t=(0,x.FU)(Y(this.props.i18n),e);this.setState({name:e,nameValidatorErrors:t})}),X(this,"handleChangeDescription",({value:e})=>{let t=(0,x.FU)(G(this.props.i18n),e);this.setState({description:e,descriptionValidatorErrors:t})}),X(this,"handleChangePrivacyToggle",({value:e})=>{let t="public";e&&(t=this.props.isAdAccount?"protected":"secret"),this.state.privacy!==t&&this.setState({privacy:t})}),X(this,"handleEnableSecret",()=>{this.setState({privacy:"secret",showSecretConfirmation:!1})}),X(this,"handleHideSecretConfirmation",()=>{this.setState({showSecretConfirmation:!1})}),X(this,"handleChangeRecommendationToggle",({value:e})=>{this.setState({allowHomefeedRecommendations:e})}),X(this,"handleChangeCollabBoardEmail",({value:e})=>{this.setState({collab_board_email:e})}),X(this,"handleChangeCollaboratorInvitesEnabled",({value:e})=>{this.setState({collaboratorInvitesEnabled:e})}),X(this,"handleCheckboxChange",e=>({event:t,checked:a})=>e({event:t,value:a})),X(this,"handleSubmit",e=>{let{onSubmit:t,shouldShowCollaboratorsInviteToggle:a}=this.props,{collab_board_email:o,collaboratorInvitesEnabled:r,description:s,name:l,privacy:n,allowHomefeedRecommendations:d}=this.state;if("preventDefault"in e&&e.preventDefault&&e.preventDefault(),this.submitDisabled())return;let c=l.trim(),h=s.trim();this.setState({submitting:!0,submitError:""}),t(a?{name:c,collab_board_email:o,collaborator_invites_enabled:r,description:h,privacy:n,allow_homefeed_recommendations:d}:{name:c,collab_board_email:o,description:h,privacy:n,allow_homefeed_recommendations:d}).then(()=>{this.setState({submitting:!1})}).catch(e=>{let t=this.props.i18n._('Uh oh! Something went wrong.', ' - ', ' -- '),a=(0,i.Z)(e,"message");if(a){let o=(0,i.Z)(e,"message_detail");t=o?`${a} ${o}`:a}else"string"==typeof e&&(t=e);this.setState({submitting:!1,submitError:t})})}),X(this,"handleShowBoardCoverEditModal",()=>{this.setState({showBoardCoverEdit:!0})}),X(this,"handleHideBoardCoverEditModal",()=>{this.setState({showBoardCoverEdit:!1})}),X(this,"handleShowCollaboratorsModal",()=>{this.setState({showCollaboratorsModal:!0})}),X(this,"handleHideCollaboratorsModal",()=>{this.setState({showCollaboratorsModal:!1})}),X(this,"handleSaveBoardCoverEditModal",e=>{this.handleHideBoardCoverEditModal();let{onCropChange:t}=this.props;t&&t(e)});let{board:{collab_board_email:t,collaborator_invites_enabled:a,description:o,name:r,pin_count:s,privacy:l,allow_homefeed_recommendations:n}}=e;this.state={collab_board_email:t,description:o,name:r,pin_count:s,privacy:l,allowHomefeedRecommendations:n,collaboratorInvitesEnabled:a,nameValidatorErrors:[],descriptionValidatorErrors:[],showBoardCoverEdit:!1,showCollaboratorsModal:!1,showSecretConfirmation:!1,submitting:!1,previousName:r,previousDescription:o,previousPrivacy:l}}static getDerivedStateFromProps(e,t){let a={};return e.board.name&&e.board.name!==t.previousName&&(a.previousName=e.board.name,a.nameValidatorErrors=(0,x.FU)(Y(e.i18n),e.board.name)),e.board.description&&e.board.description!==t.previousDescription&&(a.previousDescription=e.board.description,a.descriptionValidatorErrors=(0,x.FU)(G(e.i18n),e.board.description)),e.board.privacy&&e.board.privacy!==t.previousPrivacy&&(a.previousPrivacy=e.board.privacy),a}getFormFooter(){let{submitText:e}=this.props,{submitError:t}=this.state;return(0,y.jsxs)(o.Fragment,{children:[(0,y.jsx)(r.kC,{alignItems:"center",justifyContent:"end",wrap:!0,children:(0,y.jsx)(r.xu,{children:(0,y.jsx)(r.kC,{alignItems:"stretch",justifyContent:"start",children:(0,y.jsx)(r.xu,{height:48,children:(0,y.jsx)(r.zx,{color:"red",dataTestId:"board-form-submit-button",disabled:this.submitDisabled(),onClick:this.handleSubmit,size:"lg",text:e,type:"submit"})})})})}),t&&(0,y.jsx)(r.xu,{"aria-live":"polite",paddingX:1,tabIndex:0,children:(0,y.jsx)(r.xv,{color:"error",children:t})})]})}submitDisabled(){let{descriptionValidatorErrors:e,name:t,nameValidatorErrors:a,submitting:o}=this.state;return!t||a.length>0||e.length>0||o}render(){let{board:e,board:{archived_by_me_at:t,cover_pin:a,id:s,is_collaborative:i},coverImageHeight:n,coverImageWidth:d,currentUserIsOwner:h,handleBoardLeave:_,isAdAccount:b,isAdAccountOwner:m,isDeletable:g,isDesktop:x,isEditable:v,isNameAndSecretView:C,onClose:f,onDeleteButtonClick:j,requestContext:P,title:B,useModalWithNoLayer:w,showSecretBoardCreateToggle:E,shouldShowAddCollaborators:k,shouldShowCollaboratorsInviteToggle:I,setSelectedContacts:D,selectedContacts:T,isProfilePublisher:X}=this.props,{allowHomefeedRecommendations:W,collab_board_email:G,collaboratorInvitesEnabled:Y,description:q,descriptionValidatorErrors:K,name:Q,nameValidatorErrors:ee,pin_count:et,privacy:ea,showBoardCoverEdit:eo,showCollaboratorsModal:er,showSecretConfirmation:es}=this.state,ei=v&&et>0,el=e.is_ads_only,en=(0,y.jsxs)(M,{children:[ei&&(0,y.jsx)(S,{coverPin:a,handleShowBoardCoverEditModal:this.handleShowBoardCoverEditModal}),(0,y.jsx)(N,{disabled:el,name:Q,nameValidatorErrors:ee,onChange:this.handleChangeName}),(0,y.jsx)(R,{description:q,descriptionValidatorErrors:K,onChange:this.handleChangeDescription}),h&&!!_&&(0,y.jsx)(Z,{board:e,onCollaboratorInviteClick:this.handleShowCollaboratorsModal}),(0,y.jsxs)(r.pg,{legend:this.props.i18n._('Settings', 'BoardForm.BoardForm', 'Section heading in board edit form'),children:[(0,y.jsx)($,{isProtectedToggler:!!b,isToggleDisable:!!b&&!m&&!X,onChange:this.handleChangePrivacyToggle,onCheckboxChange:this.handleCheckboxChange(this.handleChangePrivacyToggle),privacy:ea}),!t&&(0,y.jsx)(H,{allowHomefeedRecommendations:W,onCheckboxChange:this.handleCheckboxChange(this.handleChangeRecommendationToggle)}),(0,y.jsx)(F,{hasCollabBoardEmail:G,isCollaborative:i,onCheckboxChange:this.handleCheckboxChange(this.handleChangeCollabBoardEmail)}),I&&(0,y.jsx)(L,{collaboratorInvitesEnabled:Y,isCollaborative:i,onCheckboxChange:this.handleCheckboxChange(this.handleChangeCollaboratorInvitesEnabled)})]}),g&&(0,y.jsxs)(r.xu,{marginTop:-15,paddingY:4,children:[(0,y.jsx)(r.X6,{accessibilityLevel:3,size:"100",children:(0,y.jsx)(r.xv,{inline:!0,size:"100",children:this.props.i18n._('Action', 'BoardForm.BoardForm.Action', 'Section heading in board edit form')})}),(0,y.jsxs)(r.iP,{onTap:j,children:[(0,y.jsx)(r.xu,{"data-test-id":"deleteBoardButton",marginBottom:1,marginTop:2,children:(0,y.jsx)(r.X6,{accessibilityLevel:4,size:"400",children:this.props.i18n._('Delete board', 'BoardForm.Delete', 'Delete board label')})}),(0,y.jsx)(r.xv,{color:"subtle",size:"300",children:(0,c.nk)(this.props.i18n._('You have {{ MAX_AGE_RECENTLY_DELETED_BOARD }}  days to restore a deleted Board. After that, it will be permanently deleted.', 'boardForm.delete.helperText', 'Delete board warning text'),{MAX_AGE_RECENTLY_DELETED_BOARD:p.Xq})})]})]})]});h?C&&(en=(0,y.jsxs)(M,{children:[(0,y.jsx)(N,{disabled:el,name:Q,nameValidatorErrors:ee,onChange:this.handleChangeName}),!E&&(0,y.jsx)($,{isProtectedToggler:!!b,isToggleDisable:!!b&&!m&&!X,onChange:this.handleChangePrivacyToggle,onCheckboxChange:this.handleCheckboxChange(this.handleChangePrivacyToggle),privacy:ea}),k&&(0,y.jsx)(A,{selectedContacts:T,setSelectedContacts:D})]})):en=(0,y.jsxs)(M,{children:[!!_&&(0,y.jsx)(Z,{board:e,onCollaboratorInviteClick:this.handleShowCollaboratorsModal}),(0,y.jsx)(F,{hasCollabBoardEmail:G,isCollaborative:i,onCheckboxChange:this.handleCheckboxChange(this.handleChangeCollabBoardEmail)}),!t&&el&&(0,y.jsx)(H,{allowHomefeedRecommendations:W,onCheckboxChange:this.handleCheckboxChange(this.handleChangeRecommendationToggle)}),(0,y.jsx)(r.xv,{color:"subtle",size:"300",children:(0,c.nk)(this.props.i18n._('Only the board\u2019s owner ({{ boardOwner }}) can manage the rest of its features', 'BoardForm.CollaboratorPermissionsCopy', 'Copy on board edit form letting collaborators know of their permissions on a board'),{boardOwner:(0,y.jsx)(r.xv,{color:"subtle",inline:!0,size:"300",weight:"bold",children:e.owner.full_name})})})]});let ed=w?r.u_:l.ZP,ec=this.props.i18n._('Change board cover', 'BoardForm.BoardCoverEdit.heading', 'Change board cover heading'),eh=(0,y.jsxs)(r.xu,{paddingY:8,position:"relative",children:[(0,y.jsx)(r.X6,{align:"center",size:"600",children:ec}),(0,y.jsx)(r.xu,{left:P.isRTL,paddingX:6,paddingY:8,position:"absolute",right:!P.isRTL,top:!0,children:(0,y.jsx)(r.hU,{accessibilityLabel:this.props.i18n._('Cancel change board cover', 'BoardForm.BoardCoverEdit.cancel', 'Cancel change board cover heading'),icon:"cancel",iconColor:"darkGray",onClick:this.handleHideBoardCoverEditModal,size:"md"})})]});return(0,y.jsxs)(o.Fragment,{children:[(0,y.jsx)(J,{condition:!!w,children:!eo&&!er&&(0,y.jsx)(ed,{accessibilityModalLabel:this.props.i18n._('Board form', 'BoardForm.BoardForm', 'Accessibility label on board form'),footer:this.getFormFooter(),heading:B,onDismiss:f,size:"sm",children:(0,y.jsx)(r.xu,{"data-test-id":"board-form-container",marginEnd:"auto",marginStart:"auto",rounding:2,children:(0,y.jsxs)("form",{method:"post",onSubmit:this.handleSubmit,children:[!el&&en,el&&(0,y.jsx)(O,{board:e,collabBoardEmail:G,collaboratorInvitesEnabled:Y,coverPin:a,currentUserIsOwner:h,description:q,descriptionValidatorErrors:K,handleBoardLeave:_,handleChangeCollabBoardEmail:this.handleCheckboxChange(this.handleChangeCollabBoardEmail),handleChangeCollaboratorInvitesEnabled:this.handleCheckboxChange(this.handleChangeCollaboratorInvitesEnabled),handleChangeDescription:this.handleChangeDescription,handleChangeName:this.handleChangeName,handleShowBoardCoverEditModal:this.handleShowBoardCoverEditModal,handleShowCollaboratorsModal:this.handleShowCollaboratorsModal,isCollaborative:i,name:Q,nameValidatorErrors:ee,shouldShowCollaboratorsInviteToggle:I,showCoverEdit:ei})]})})})}),eo&&x&&(0,y.jsx)(u.Z,{children:(0,y.jsx)(U,{boardId:s,boardName:Q,coverPinId:a?.pin_id,frameHeight:n,frameWidth:d,heading:eh,onCancel:this.handleHideBoardCoverEditModal,onSave:this.handleSaveBoardCoverEditModal})}),es&&(0,y.jsx)(z.Z,{confirmButtonLabel:this.props.i18n._('Make secret', 'Setting the boards visibility to secret', 'Setting the boards visibility to secret'),heading:this.props.i18n._('Are you sure?', 'Warning label asking users to be sure of their action', 'Warning label asking users to be sure of their action'),message:this.props.i18n._('If you make this board secret, some active ads will stop running', 'Explicitly warning users of the board visibility action they are doing', 'Explicitly warning users of the board visibility action they are doing'),onCancel:this.handleHideSecretConfirmation,onConfirm:this.handleEnableSecret}),er&&(0,y.jsx)(u.Z,{children:(0,y.jsx)(V,{board:e,fromBoardEditModal:!0,onDismiss:this.handleHideCollaboratorsModal})})]})}}function K(e){let t=(0,d.ZP)(),a=(0,g.ZP)(),{checkExperiment:o}=(0,h.ru)(),r=!o("sg_hide_collab_invite_on_edit_modal").anyEnabled;return(0,y.jsx)(q,{...e,i18n:t,isDesktop:"desktop"===a,requestContext:(0,_.B)(),shouldShowCollaboratorsInviteToggle:r,toastManagerContext:(0,m.dI)()})}X(q,"defaultProps",{isNameAndSecretView:!1})},476482:function(e,t,a){a.d(t,{Z:()=>l});var o=a(20256),r=a(982166),s=a(525839),i=a(785893);function l({cancelButtonLabel:e,confirmButtonLabel:t,heading:a,message:l,onCancel:n,onConfirm:d}){let c=(0,s.ZP)(),h=a||c._('Are you sure?', ' - ', ' -- '),_=e||c._('Cancel', ' - ', ' -- ');return(0,i.jsx)(r.ZP,{accessibilityModalLabel:h,footer:(0,i.jsxs)(o.xu,{marginEnd:-1,marginStart:-1,children:[(0,i.jsx)(o.xu,{"data-test-id":"cancel-button",padding:1,children:(0,i.jsx)(o.zx,{fullWidth:!0,onClick:n,size:"lg",text:_})}),(0,i.jsx)(o.xu,{"data-test-id":"confirm-button",padding:1,children:(0,i.jsx)(o.zx,{color:"red",fullWidth:!0,onClick:d,size:"lg",text:t})})]}),heading:h,onDismiss:n,role:"alertdialog",children:(0,i.jsx)(o.xu,{padding:4,children:(0,i.jsx)(o.xv,{children:l})})})}},812577:function(e,t,a){a.d(t,{I:()=>l,Z:()=>i});var o=a(886981),r=a(947810);let s=({boardId:e,ownerUsername:t,ownerName:a,ownerImgSrc:s})=>{let i=(0,r.Z)(),{data:l,isLoaded:n}=(0,o.Z)({name:"BoardInvitesResource",options:{board_id:e,field_set_key:"boardEdit",status_filters:"new,accepted,contact_request_not_approved",sort:"viewer_first",include_inactive:!0,...i?{orbac_subject_id:i}:{}}}),d=[{name:a,src:s,href:`/${t}/`,isDim:!1}];return n&&l&&l.length>0&&l.forEach(e=>{d.push({name:e&&e.invited_user?e.invited_user.full_name:"",color:e&&e.invited_user?e.invited_user.avatar_color_index:void 0,src:e&&e.invited_user?e.invited_user.image_medium_url:"",href:e&&e.invited_user?`/${e.invited_user.username}/`:"",isDim:e&&["new","contact_request_not_approved"].includes(e.status)})}),d},i=s;function l({children:e,...t}){return e(s(t))}},890774:function(e,t,a){a.d(t,{Z:()=>c});var o=a(581722),r=a(782677),s=a(575108),i=a(877956),l=a(440568),n=a(536652),d=a(72918);function c(){let e=(0,o.I0)(),t=(0,o.v9)(e=>e.resources);return async function({boardCreateOptions:a,deprecatedSchemaForNormalization:o}){let c=await s.Z.create("BoardResource",a).callCreate(),h=c.resource_response.data,_=o?(0,r.Fv)(h,o):void 0;e((0,d.XM)("BoardResource",a,c,_)),e((0,i.fO)({event_type:20})),h.owner?.id&&e((0,n.b)("UserResource",{options:{user_id:h.owner.id,field_set_key:"save_behavior"}}));let u=t.BoardsResource||{},b=t.BoardsFeedResource||{};return Object.keys(u).forEach(t=>{(0,l.k)(t).username===h.owner?.username&&e((0,d.jB)("BoardsResource",t))}),Object.keys(b).forEach(t=>{(0,l.k)(t).username===h.owner?.username&&e((0,d.jB)("BoardsFeedResource",t))}),h}}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/69094-0c32f8f21b22cb2b.mjs.map